{"version":3,"sources":["api/apiHandler.js","components/Auth/UserContext.jsx","components/Auth/UserProvider.jsx","components/Auth/withUser.jsx","components/NavMain.jsx","pages/Home.jsx","components/Forms/FormSignin.jsx","pages/Signin.jsx","components/Forms/FormSignup.jsx","pages/Signup.jsx","components/ProtectedRoute.jsx","pages/Profile.jsx","styles/theme.js","pages/trip/CreateTrip.jsx","components/DraggableTour.jsx","components/DropTarget.jsx","components/DragAndDrop.jsx","pages/trip/OneTrip.jsx","pages/UpdateProfile.jsx","pages/Dashboard.jsx","components/FooterMain.jsx","components/AppMap.jsx","components/EachPOI.jsx","pages/SearchPagePOI.jsx","components/EachTour.jsx","components/SearchBar.jsx","pages/SearchPageActivities.jsx","pages/OneTour.jsx","App.jsx","index.js"],"names":["service","axios","create","baseURL","process","withCredentials","errorHandler","error","response","data","console","log","userInfo","post","then","res","catch","get","apiRes","patch","id","delete","desti","UserContext","React","createContext","UserProvider","state","user","isLoggedIn","isLoading","setUser","setState","removeUser","apiHandler","authValues","this","Provider","value","props","children","Component","withUser","ComponentToPassUserContextTo","Consumer","context","handleLogout","className","exact","to","src","alt","Fragment","Button","color","variant","ButtonGroup","aria-label","firstName","onClick","Home","FormSignin","email","password","handleChange","event","key","target","name","type","files","checked","handleSubmit","preventDefault","history","push","onChange","onSubmit","TextField","style","width","label","contextType","withRouter","Signin","FormSignup","lastName","birthDate","Signup","component","rest","render","userProfile","profilePicture","theme","createMuiTheme","palette","primary","main","light","dark","secondary","dateBegin","dateEnd","destination","tripLength","e","numberOfDays","Math","round","Date","parse","newUser","trips","_id","err","defaultValue","required","FormControl","InputLabel","Select","labelId","placeholder","MenuItem","DraggableTour","useDrag","item","image","object","collect","monitor","isDragging","drag","ref","substr","newTrip","details","objectToFind","tour","find","elem","indexToFind","indexOf","splice","window","location","reload","handleDelete","DropTarget","markAsDone","useContext","CardContext","useDrop","accept","drop","obj","index","isOver","dropResult","getItem","backgroundColor","onDrop","DragAndDrop","handleDrop","numberOfDay","org","organisation","tourId","day","handleTour","pointsOfInterest","map","i","display","flexDirection","margin","properties","repeat","rate","flexWrap","justifyContent","DndProvider","backend","HTML5Backend","link","bookingLink","pictures","indexOfDays","p","trip","capitalize","s","charAt","toUpperCase","slice","match","params","days","Array","keys","apiErr","backgroundImage","backgroundRepeat","pathname","Dashboard","componentDidMount","idToDelete","loaded","href","FooterMain","height","Map","ReactMapboxGl","accessToken","pointsOfInterestImg","Image","crossOrigin","AppMap","lng","lat","zoom","handleClick","selectedItem","handleSelectItem","containerStyle","top","left","bottom","right","position","center","images","layout","coordinates","geometry","PureComponent","eachTour","tours","kinds","replaceAll","addToTrip","a","dbRes","handleNewSearch","search","copyData","filter","includes","filteredData","features","sort","b","onSelectItem","tourList","shortDescription","price","amount","ComponentToPassStyleTo","useStyles","makeStyles","root","child","SearchBar","handleSearch","classes","Grid","container","spacing","alignItems","highOrderComponent","OneTour","rating","App","ThemeProvider","CssBaseline","path","Profile","CreateTrip","OneTrip","SearchPageActivities","UpdateProfile","SearchPagePOI","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b31ae51f.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst service = axios.create({\r\n  baseURL: process.env.REACT_APP_BACKEND_URL,\r\n  withCredentials: true, // Cookie is sent to client when using this service. (used for session)\r\n});\r\n\r\nfunction errorHandler(error) {\r\n  if (error.response.data) {\r\n    console.log(error.response && error.response.data);\r\n    throw error;\r\n  }\r\n  throw error;\r\n}\r\n\r\nexport default {\r\n  service,\r\n\r\n  signup(userInfo) {\r\n    return service\r\n      .post(\"/api/auth/signup\", userInfo)\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n  signin(userInfo) {\r\n    return service\r\n      .post(\"/api/auth/signin\", userInfo)\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n  isLoggedIn() {\r\n    return service\r\n      .get(\"/api/auth/isLoggedIn\")\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n  logout() {\r\n    return service\r\n      .get(\"/api/auth/logout\")\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n// Profile \r\n  getProfile() {\r\n    return service\r\n    .get(\"/api/profile/me\")\r\n    .then((apiRes) => apiRes)\r\n    .catch(errorHandler)\r\n  },\r\n\r\n  modifyProfile(userInfo) {\r\n    return service\r\n      .patch(\"/api/profile/edit\", userInfo)\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  deleteProfile() {\r\n    return service\r\n      .delete(\"/api/profile\")\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  //Trips \r\n  getAllTrips() {\r\n    return service  \r\n      .get(\"/api/trip\")\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  getOneTrip(id) {\r\n    return service \r\n      .get(\"/api/trip/\" + id)\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n  \r\n  createTrip(data) {\r\n    return service\r\n    .post(\"/api/trip\", data)\r\n    .then((apiRes) => apiRes.data)\r\n    .catch(errorHandler)\r\n  },\r\n\r\n  modifyTrip(id, data) {\r\n    return service  \r\n      .patch(\"/api/trip/\" + id, data)\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  deleteTrip(id) {\r\n    return service\r\n      .delete(\"/api/trip/\" + id)\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  // new Tour DB\r\n  getActivities(desti) {\r\n    return service\r\n      .get(\"/api/activity/destination/\" + desti)\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  getOneActivity(id) {\r\n    return service  \r\n      .get(\"/api/activity/\" + id)\r\n      .then((apiRes) => apiRes)\r\n  },\r\n\r\n// OPENTRIPMAP API\r\n  getPointsOfInterest(desti) {\r\n    return service\r\n      .get(\"api/openTripMap/\" + desti)\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n};\r\n","import React from \"react\";\r\n\r\nexport const UserContext = React.createContext();\r\n","import React, { Component } from \"react\";\r\nimport apiHandler from \"../../api/apiHandler\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nclass UserProvider extends Component {\r\n  state = {\r\n    user: null,\r\n    isLoggedIn: false,\r\n    isLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    apiHandler\r\n      .isLoggedIn()\r\n      .then((data) => {\r\n        this.setState({ user: data, isLoggedIn: true, isLoading: false });\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ user: null, isLoggedIn: false, isLoading: false });\r\n      });\r\n  }\r\n\r\n  setUser = (user) => {\r\n    this.setState({ user, isLoggedIn: true });\r\n  };\r\n\r\n  removeUser = () => {\r\n    this.setState({ user: null, isLoggedIn: false });\r\n  };\r\n\r\n  render() {\r\n    //  Setup all the values/functions you want to expose to anybody reading\r\n    // from the AuthContext.\r\n    const authValues = {\r\n      user: this.state.user,\r\n      setUser: this.setUser,\r\n      removeUser: this.removeUser,\r\n      isLoggedIn: this.state.isLoggedIn,\r\n      isLoading: this.state.isLoading,\r\n    };\r\n\r\n    return (\r\n      <UserContext.Provider value={authValues}>\r\n        {this.props.children}\r\n      </UserContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserProvider;\r\n","import React from \"react\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\n// This is what we call a HOC (Higher Order Component).\r\n// It takes a component as a parameter and it returns a component.\r\n// This technique can be used to abstract some logic in order to pass\r\n// some data down as props to the component sent as parameter.\r\n\r\n// The use case of this one is to make it easy to access the user context to\r\n// any component in our app.\r\n\r\n/* ******************************************************** */\r\n\r\n//  How to use:  =>\r\n// YourComponent.jsx\r\n// import React from \"react\"\r\n// function or class YourComponent()\r\n//\r\n// ... your implementation.\r\n//\r\n// export default withUser(YourComponent)\r\n// ----------------^ your component now has access to the user context defined in UserProvider.jsx.\r\n\r\nexport const withUser = (ComponentToPassUserContextTo) => {\r\n  return function (props) {\r\n    return (\r\n      <UserContext.Consumer>\r\n        {(context) => (\r\n          <ComponentToPassUserContextTo {...props} context={context} />\r\n        )}\r\n      </UserContext.Consumer>\r\n    );\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { withUser } from \"../components/Auth/withUser\";\r\nimport apiHandler from \"../api/apiHandler\";\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport \"../styles/NavMain.css\";\r\n\r\n\r\n\r\n class NavMain extends React.Component {\r\n\r\n\r\n  handleLogout = () => {\r\n    apiHandler\r\n      .logout()\r\n      .then(() => {\r\n        this.props.context.removeUser();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  render () {\r\n    // console.log(this.props.context)\r\n    return (\r\n      <nav className=\"NavMain\">\r\n      <NavLink exact to=\"/\">\r\n        <img src=\"/images/logo.png\" alt=\"Logo\" />\r\n      </NavLink>\r\n          \r\n        {this.props.context.isLoggedIn && (\r\n          <React.Fragment>\r\n          <ul className=\"nav-trip\">\r\n            <Button color=\"secondary\" variant=\"contained\">\r\n              <NavLink to=\"/create-trip\">\r\n                + Create a New Trip\r\n              </NavLink>\r\n            </Button> &nbsp;\r\n            <Button color=\"secondary\" variant=\"contained\">\r\n              <NavLink to=\"/dashboard\">\r\n                My Dashboard\r\n              </NavLink>\r\n            </Button> \r\n          </ul>\r\n          <ul className=\"nav-log\">\r\n          <ButtonGroup variant=\"contained\" color=\"secondary\" aria-label=\"contained primary button group\">\r\n            \r\n              <Button><NavLink to=\"/profile\">\r\n                {this.props.context.user && this.props.context.user.firstName}\r\n              </NavLink></Button>\r\n            \r\n            <Button>\r\n              <p onClick={this.handleLogout}>Logout</p>\r\n            </Button>\r\n          </ButtonGroup>\r\n          </ul>\r\n          </React.Fragment>\r\n        )}\r\n        {!this.props.context.isLoggedIn && (\r\n          <React.Fragment>\r\n          \r\n          <ul className=\"nav-log\">\r\n          <ButtonGroup variant=\"contained\" color=\"secondary\" aria-label=\"contained primary button group\">\r\n            \r\n              <Button>\r\n              <NavLink to=\"/signin\">Log in</NavLink>\r\n              </Button>\r\n            \r\n              <Button>\r\n              <NavLink to=\"/signup\">Create account</NavLink>\r\n              </Button>\r\n            </ButtonGroup>\r\n          </ul>\r\n\r\n          </React.Fragment>\r\n        )}\r\n    </nav>\r\n  );\r\n}\r\n};\r\n\r\nexport default withUser(NavMain);\r\n","import React from \"react\";\r\nimport '../styles/home.css'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\nclass Home extends React.Component {\r\n  render() {\r\n    return (\r\n      <>\r\n      <div className=\"home\">\r\n        <h1>Welcome To Trip & Karmeliet</h1>\r\n        <p>With T&K planning your holiday has never been so easy !</p>\r\n        <p> Pick a destination, choose your activities, and hop-on the next plane to live an unforgettable adventure</p><br />\r\n      <Button variant=\"contained\" color=\"primary\">Create my first Trip !</Button>\r\n      </div>\r\n      <div className=\"image-line\">\r\n      <div>BARCELONA - BERLIN - PARIS - LONDON</div>\r\n      </div>\r\n      </>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from \"react\";\r\nimport Button from '@material-ui/core/Button'\r\nimport { UserContext } from \"../Auth/UserContext\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport apiHandler from \"../../api/apiHandler\";\r\nimport TextField from '@material-ui/core/TextField'\r\nimport '../../styles/form.css'\r\n\r\nclass FormSignin extends Component {\r\n  static contextType = UserContext;\r\n\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    const key = event.target.name;\r\n\r\n    // You can test more if you have to handle different sorts of inputs.\r\n    const value =\r\n      event.target.type === \"file\"\r\n        ? event.target.files[0]\r\n        : event.target.type === \"checkbox\"\r\n        ? event.target.checked\r\n        : event.target.value;\r\n\r\n        \r\n        this.setState({ [key]: value });\r\n      };\r\n      \r\n      handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        \r\n        apiHandler\r\n        .signin(this.state)\r\n        .then((data) => {\r\n          this.context.setUser(data);\r\n          this.props.history.push(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          // Display error message here, if you set the state\r\n        });\r\n        \r\n    }\r\n      render() {\r\n        // console.log(this.state)\r\n    return (\r\n      <div className='backgroundFormSignIn'>\r\n      {/* // rajouter le handlesubmit onkeypress 13(Je crois) si t'as le temps */}\r\n      <form onChange={this.handleChange} onSubmit={this.handleSubmit} className=\"form\">\r\n      <img src=\"/favicon.ico\" alt=\"toto\" /><br />\r\n      <h1>Please Sign In</h1>\r\n        {/* <label htmlFor=\"email\">Email</label> */}\r\n        <TextField style={{width: '40%'}} type=\"email\" id=\"email\" name=\"email\" label=\"E-mail\" variant=\"outlined\" className=\"input\"/><br />\r\n        \r\n        {/* <label htmlFor=\"password\">Password</label> */}\r\n        <TextField style={{width: '40%'}} type=\"password\" id=\"password\" variant=\"outlined\" label=\"Password\" name=\"password\" className=\"input\"/>\r\n        <br />\r\n        <Button color=\"primary\" variant=\"contained\" type=\"button\" onClick={this.handleSubmit}>Submit</Button>\r\n      </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(FormSignin);\r\n","import React from \"react\";\r\nimport FormSignin from \"../components/Forms/FormSignin\";\r\n\r\nconst Signin = (props) => {\r\n  return <FormSignin />;\r\n};\r\n\r\nexport default Signin;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { UserContext } from \"../Auth/UserContext\";\r\nimport apiHandler from \"../../api/apiHandler\";\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nclass FormSignup extends Component {\r\n  static contextType = UserContext;\r\n\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    lastName:\"\",\r\n    firstName:\"\",\r\n    birthDate:\"\",\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    const value =\r\n      event.target.type === \"file\"\r\n        ? event.target.files[0]\r\n        : event.target.type === \"checkbox\"\r\n        ? event.target.checked\r\n        : event.target.value;\r\n\r\n    const key = event.target.name;\r\n    \r\n    this.setState({ [key]: value, });\r\n    console.log(this.state)\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    apiHandler\r\n      .signup(this.state)\r\n      .then((data) => {\r\n        this.context.setUser(data);\r\n        this.props.history.push(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='backgroundFormSignUp'>\r\n\r\n      <form onChange={this.handleChange} onSubmit={this.handleSubmit} className=\"form\">\r\n      <img src=\"/favicon.ico\" alt=\"toto\" /><br />\r\n      <h1>Please Sign Up</h1><br />\r\n       \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"text\" id=\"firstName\" label='First Name' name=\"firstName\" /><br />\r\n\r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"text\" id=\"lastName\" label='Last Name' name=\"lastName\" /><br />\r\n        \r\n        {/* <TextField style={{width: '40%'}} variant=\"outlined\" type=\"date\" id=\"birthDate\" name=\"birthDate\"/><br /> */}\r\n        \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"email\" id=\"email\" label='E-mail' name=\"email\" /><br />\r\n        \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"password\" id=\"password\" label='Password' name=\"password\" /><br />\r\n\r\n\r\n        <Button color=\"primary\" variant=\"contained\" onClick={this.handleSubmit}>Submit</Button>\r\n      </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(FormSignup);\r\n","import React from \"react\";\r\nimport FormSignup from \"../components/Forms/FormSignup\";\r\n\r\nconst Signup = (props) => {\r\n  return <FormSignup />;\r\n};\r\n\r\nexport default Signup;\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { withUser } from \"../components/Auth/withUser\";\r\n\r\nconst ProtectedRoute = ({ component: Component, context, ...rest }) => {\r\n  if (context.isLoading) {\r\n    return null;\r\n  } else if (context.isLoggedIn) {\r\n    return <Route {...rest} render={(props) => <Component {...props} />} />;\r\n  } else {\r\n    return <Redirect to=\"/signin\" />;\r\n  }\r\n};\r\n\r\nexport default withUser(ProtectedRoute);\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport {withUser} from '../components/Auth/withUser'\r\nimport Button from '@material-ui/core/Button'\r\nimport '../styles/profile.css'\r\n\r\nconst Profile = (props) => {\r\n  const userProfile = props.context.user\r\n  \r\n  // console.log(userProfile)\r\n  return (\r\n    <div className='profile'>\r\n      <h1> Hey {userProfile.firstName} !</h1> &nbsp;\r\n    <div className=\"profile-details\">\r\n      <img src={userProfile.profilePicture} alt={userProfile.firstName}/>\r\n      <h3>Please find your information below : </h3>\r\n        <p>First Name : {userProfile.firstName}<br/>\r\n        Last Name : {userProfile.lastName}<br/>\r\n        E-mail : {userProfile.email}</p>\r\n    </div>\r\n\r\n   <NavLink to=\"/profile/edit\">\r\n      <Button color=\"primary\" variant=\"contained\">\r\n        Modify My Profile \r\n      </Button>\r\n    </NavLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withUser(Profile);\r\n","import { createMuiTheme }  from '@material-ui/core/styles'\r\n\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n        main: '#0800a3',\r\n        light: '#554dff',\r\n        dark: '#737373'\r\n    },\r\n    secondary: {\r\n        main: '#f1c232ff',\r\n        light: '#f0cc00'\r\n    },\r\n    error: {\r\n      main: '#ff0505',\r\n    },\r\n  },\r\n})\r\n\r\n\r\nexport default theme","import React, { Component } from 'react'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport {withUser} from '../../components/Auth/withUser'\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { MenuItem } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button'\r\nimport apiHandler from '../../api/apiHandler';\r\nimport '../../styles/create-trip.css'\r\n\r\nclass CreateTrip extends Component {\r\n    state = {\r\n        dateBegin: \"\",\r\n        dateEnd: \"\",\r\n        destination:\"\",\r\n        tripLength: 0,\r\n        error: false\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        e.preventDefault();\r\n\r\n        const name = e.target.name\r\n        const value = e.target.value\r\n        this.setState({\r\n            [name]: value,\r\n        })\r\n        \r\n        // console.log(e.target.value)\r\n        // console.log(e.target.name)\r\n\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        const oneDay = 24 * 60 * 60 * 1000\r\n        const numberOfDays = Math.round(((Date.parse(this.state.dateEnd) - Date.parse(this.state.dateBegin)) / oneDay) +1 )\r\n        if (numberOfDays <= 0 || !this.state.destination) {\r\n            this.setState({\r\n                error: !this.state.error\r\n            })\r\n        }\r\n        const newUser = {...this.props.context.user}\r\n\r\n        this.setState({\r\n            tripLength: numberOfDays,\r\n        })\r\n        console.log(numberOfDays)\r\n        if (numberOfDays <= 0) {\r\n        } else{\r\n            // console.log(\"ce qu'on va créer\",this.state)\r\n            apiHandler\r\n                .createTrip(this.state)\r\n                .then((data) => {\r\n                    newUser.trips.push(data._id)\r\n                    // console.log(newUser)\r\n                    apiHandler\r\n                        .modifyProfile(newUser)\r\n                        .then((res) => {\r\n                            console.log(res)\r\n                        })\r\n                    // this.props.context.setUser(newUser)\r\n                    this.props.history.push(`/trip/${data._id}`)\r\n\r\n                })\r\n                .catch((err) => {\r\n                    // console.log(err)\r\n                });\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    render() {\r\n        // console.log('dans render', this.props.context.user.trips)\r\n        return (\r\n            <div className=\"create-trip\">\r\n                <form className=\"create-trip-form\" onChange={this.handleChange} onSubmit={this.handleSubmit}>\r\n            <h1>Create Your Trip !</h1>\r\n            &nbsp;\r\n            <p>Start by picking your trip dates and the destination you are going to ! <br /><br /> You will then arrive on your Trip page from which you can have a look at what you planned. <br/><br /> You will also be able to search for interesting activities and points of interest in that destination, pick them up and let us create the perfect schedule ! </p><br /> <br />\r\n                    <div>\r\n                    <TextField style={{width: '45%'}} type=\"date\" variant=\"outlined\" defaultValue=\"2020-07-14\" label=\"Start Date\" name=\"dateBegin\" required/> &nbsp; \r\n                    <TextField style={{width: '45%'}} type=\"date\" variant=\"outlined\" defaultValue=\"2020-07-21\" label=\"End Date\" name=\"dateEnd\" required/>\r\n                    </div><br />\r\n\r\n                    <FormControl variant=\"outlined\" style={{width: '70%'}}>\r\n                        <InputLabel id=\"destination\">Destination</InputLabel>\r\n                        <Select labelId=\"destination\" name=\"destination\" placeholder=\"Destination\" onChange={this.handleChange}>\r\n                            <MenuItem value=\"\">None</MenuItem>\r\n                            <MenuItem value={\"paris\"}>Paris</MenuItem>\r\n                            <MenuItem value={\"london\"}>London</MenuItem>\r\n                            <MenuItem value={\"berlin\"}>Berlin</MenuItem>\r\n                            <MenuItem value={\"barcelona\"}>Barcelona</MenuItem>\r\n                        </Select><br />\r\n                    <div> {this.state.error ? <p> Invalid date or destination</p> : ''}</div>\r\n                    <Button color=\"primary\" variant=\"contained\" type=\"button\" onClick={this.handleSubmit}>Create Trip</Button>\r\n                    </FormControl>\r\n\r\n\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withUser(CreateTrip)\r\n","import React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport {NavLink} from 'react-router-dom' \r\nimport apiHandler from '../api/apiHandler';\r\n\r\nexport default function DraggableTour(props) {\r\n   \r\n\r\n    const handleDelete = (id) => {\r\n        // console.log(props.id)\r\n        const newTrip = {...props.object.details}\r\n        const objectToFind = newTrip.tour.find(elem => elem._id === props.id)\r\n        const indexToFind = newTrip.tour.indexOf(objectToFind)\r\n        // console.log(indexToFind)\r\n        newTrip.tour.splice(indexToFind, 1)\r\n        apiHandler\r\n            .modifyTrip(props.object.details._id, newTrip)\r\n            .then((apiRes) => {\r\n                window.location.reload(false)\r\n                console.log(apiRes)\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const [{isDragging}, drag] = useDrag({\r\n        item: {type: 'function', name: props.name, image: props.image, id: props.id, object:props},\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n      })\r\n      console.log(props)\r\n    return (\r\n        <div className=\"activities-card\" ref={drag}>\r\n            <NavLink exact to={`/activity/${props.id}`}>\r\n            <img style={{width: '100%'}} src={props.image} alt={props.name}/>\r\n            <p>{props.name.substr(0, 23)}...</p>\r\n            <DeleteForeverIcon onClick={() => handleDelete(props.id)}/>\r\n            </NavLink>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","import React, {\r\n     useContext} from 'react'\r\nimport { useDrop } from 'react-dnd'\r\nimport { CardContext } from './DragAndDrop';\r\n\r\n\r\nexport default function DropTarget(props) {\r\n\r\n    const handleDrop = ( e , index) => {\r\n        // console.log(e, 'titi', index)\r\n\r\n    }\r\n\r\n    const {markAsDone} = useContext(CardContext)\r\n    const [{dropResult, isOver}, drop] = useDrop({\r\n        accept: 'function', \r\n        drop: (obj, monitor) => { markAsDone(obj.id, props.index)},\r\n        collect: (monitor) => ({\r\n            isOver: !!monitor.isOver(),\r\n            dropResult: monitor.getItem(),\r\n        }) \r\n    });\r\n    // console.log(props.index) // ApiHandler -> set Tour day X == props.index\r\n\r\n  return (<td ref={drop} style={{backgroundColor: isOver ? 'cornflowerblue' : \"white\"}} onDrop={handleDrop} value={props.key}> Drop the Activity here ! {props.children}</td>)\r\n}","import React from 'react'\r\nimport { useState, createContext } from 'react';\r\nimport DraggableTour from './DraggableTour';\r\nimport { DndProvider } from 'react-dnd'\r\nimport { HTML5Backend } from 'react-dnd-html5-backend'\r\nimport DropTarget from './DropTarget';\r\nimport apiHandler from '../api/apiHandler';\r\n\r\nexport const CardContext = createContext({\r\n\tmarkAsDone: null,\r\n});\r\n\r\n\r\nexport default function DragAndDrop(props) {\r\n    // console.log(props.details._id)\r\n\r\n\r\n\r\n    // // const [uniqueDrop, setUniqueDrop] = useState({accepts: 'function'})\r\n    \r\n    const handleDrop = (e, item) => {\r\n        // console.log(e, 'toto', item)\r\n       \r\n        // const {name} = item;\r\n        // setUniqueDrop()\r\n    }\r\n\r\n    const markAsDone = (_id, index) => {\r\n        const newTrip = {...props.details}\r\n\r\n        const org = [...newTrip.organisation]\r\n\r\n        org.push({tourId: _id, day: index })\r\n        \r\n        newTrip.organisation = org;\r\n\r\n        apiHandler\r\n            .modifyTrip(props.details._id, newTrip)\r\n            .then((apiRes) => {\r\n             \r\n                    props.handleTour(apiRes);\r\n            })\r\n            .catch((err) => {\r\n                // console.log(err)\r\n            })\r\n    \r\n    };\r\n    \r\n\r\n     console.log(props.details,\"props dets\", props.numberOfDay)\r\n    return (\r\n    <CardContext.Provider value={{markAsDone}}>\r\n        <div>\r\n            <div className=\"activities-and-points\">\r\n            </div>\r\n            <div className=\"points-of-interest\">\r\n                <h1>Your Points of Interest : </h1>\r\n                    <div className=\"scroll-interest\" >\r\n                        {props.details ? props.details.pointsOfInterest.map((obj, i) => {\r\n                            return (<div key={i} style={{display: \"flex\", flexDirection: \"column\", margin: \"5px\"}}>\r\n                                <h3>{obj.properties.name}</h3>\r\n                                <p>{'★'.repeat(Math.round(obj.properties.rate))}\r\n                                {'☆'.repeat(3 - Math.round(obj.properties.rate))}</p>\r\n                            </div>)\r\n                    }\r\n                    ) : (<div>content is loading</div>)}\r\n            </div>\r\n            </div>\r\n                <div className='all-activities'>\r\n                    <h1>Your Activities : </h1>\r\n                    <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent:\"center\", }}>\r\n                        {props.details ? props.details.tour.map((obj, i) => {\r\n                            return ( <React.Fragment key={i}>\r\n                                <DndProvider backend={HTML5Backend}>\r\n                                    <DraggableTour link={obj.bookingLink} image={obj.pictures[0]} name={obj.name} id={obj._id} object={props} onDrop={handleDrop}/>\r\n                                </DndProvider>\r\n                            </React.Fragment>)\r\n                    }) : (<div> Content is loading</div>)}\r\n                </div>\r\n            </div>\r\n            <div className=\"trip-table\">\r\n                <table>\r\n                    <thead>\r\n                    <tr>\r\n                        {props.details && props.numberOfDay.map((elem, i) => {\r\n                            return (<td key={i}>Day {elem}</td>   )\r\n                        })}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                        {props.details && props.numberOfDay.map((elem, indexOfDays) => {\r\n                            return (<React.Fragment key={indexOfDays}>\r\n                                <DndProvider backend={HTML5Backend}>\r\n                                     <DropTarget  index={indexOfDays}>\r\n                                     {props.details && props.details.organisation && props.details.organisation.find(p => p.day === indexOfDays) && props.details.organisation.find(p => p.day === indexOfDays).day === indexOfDays ?\r\n                                      <DraggableTour  name={props.details.organisation.find(p => p.day === indexOfDays).tourId.name} image={props.details.organisation.find(p => p.day === indexOfDays).tourId.pictures[0]} link={props.details.organisation.find(p => p.day === indexOfDays).tourId.bookingLink}/> :   null}\r\n                                     </DropTarget>\r\n                                </DndProvider>    \r\n                            </React.Fragment>)})\r\n                        }\r\n                            \r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\t\t\t\t\t{/* <DraggableTour object={props.object} link={props.details.tour[2].bookingLink} image={props.details.tour[2].pictures[0]} name={props.details.tour[2].name} /> */}\r\n        </div>\r\n    </CardContext.Provider>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport apiHandler from '../../api/apiHandler'\r\nimport { Link } from \"react-router-dom\";\r\nimport Button from '@material-ui/core/Button'\r\nimport { withUser } from '../../components/Auth/withUser'\r\nimport '../../styles/oneTrip.css'\r\nimport DragAndDrop from '../../components/DragAndDrop';\r\n\r\nclass OneTrip extends Component {\r\n\r\n    state = {\r\n        trip: {},\r\n        numberOfDay: null,\r\n    }\r\n\r\n    capitalize = (s) => {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n      }\r\n\r\n    componentDidMount() {  \r\n        apiHandler\r\n            .getOneTrip(this.props.match.params.id)\r\n            .then((apiRes) => {\r\n                // console.log(apiRes);\r\n                const oneDay = 24 * 60 * 60 * 1000\r\n                const numberOfDays = Math.round((Date.parse(apiRes.dateEnd) - Date.parse(apiRes.dateBegin)) / oneDay) +1;\r\n                const days =  [...Array(numberOfDays).keys()].map((elem) => elem+1)\r\n                this.setState({\r\n                    trip: apiRes,\r\n                    numberOfDay: days\r\n                });\r\n                // console.log(days)\r\n            })\r\n            .catch((apiErr) => {\r\n                console.log(apiErr)\r\n            }); \r\n        }\r\n\r\n        \r\n        handleTour = (tour) => {\r\n            this.setState({trip:tour})\r\n        }\r\n    \r\n    render() {\r\n        // this.state.numberOfDay && this.state.trip.tour.map((obj) => console.log(obj))\r\n        // console.log(typeof(DraggableTour))\r\n        return (\r\n            <section className='one-trip'>\r\n            <div className=\"destination\" style={{backgroundImage: `url('/images/${this.state.trip.destination}.jpg')`, backgroundRepeat: \"no-repeat\"}}>\r\n                <h1>Your trip to {this.capitalize(this.state.trip.destination)} will be unforgettable!</h1>\r\n                <p>{this.capitalize(this.state.trip.destination)} is a really nice destination, it's sure that you will enjoy your trip ! But why not adding some spices to this adventure ? </p>\r\n                <Button color=\"primary\" variant=\"contained\">\r\n                    <Link to={{pathname: \"/search/activities\", state:{trip: this.state.trip} }}>\r\n                        Search activities\r\n                    </Link> \r\n                </Button>&nbsp;\r\n                <Button color=\"primary\" variant=\"contained\">\r\n                    <Link to={{pathname: \"/search/points-of-interest\", state:{trip: this.state.trip} }}>\r\n                        Search Points of Interest\r\n                    </Link> \r\n                </Button>&nbsp;\r\n            </div>\r\n            {this.state.numberOfDay ? <DragAndDrop handleTour={this.handleTour} details={this.state.trip} numberOfDay={this.state.numberOfDay}/> : <div>Content is loading ...</div>}\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withUser(OneTrip)","import React, { Component } from 'react'\r\nimport apiHandler from \"../api/apiHandler\";\r\nimport {withUser} from '../components/Auth/withUser'\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nclass UpdateProfile extends Component {\r\n\r\n    state = {\r\n\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const value =\r\n          event.target.type === \"file\"\r\n            ? event.target.files[0]\r\n            : event.target.type === \"checkbox\"\r\n            ? event.target.checked\r\n            : event.target.value;\r\n    \r\n        const key = event.target.name;\r\n        \r\n        this.setState({ [key]: value, });\r\n        console.log(this.state)\r\n      };\r\n\r\n      handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        console.log(this.state)\r\n   \r\n        apiHandler\r\n        .modifyProfile(this.state)\r\n      \r\n        .then((res) => {\r\n          console.log(res)\r\n          this.props.context.setUser(res.data);\r\n          console.log(res)\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      };\r\n\r\n    render() {\r\n        const userProfile = this.props.context.user\r\n        // console.log(this.state)\r\n        return (\r\n            <div className='backgroundFormSignUp'>\r\n\r\n      <form onSubmit={this.handleSubmit} className=\"form\">\r\n      <img src=\"/favicon.ico\" alt=\"toto\" /><br />\r\n      <h1>Update your Infos</h1><br />\r\n       \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" defaultValue={userProfile.firstName} type=\"text\" id=\"firstName\" label='First Name'  name=\"firstName\" onChange={this.handleChange}/><br />\r\n\r\n        <TextField style={{width: '40%'}} variant=\"outlined\" defaultValue={userProfile.lastName} type=\"text\" id=\"lastName\" label='Last Name' name=\"lastName\" onChange={this.handleChange} /><br />\r\n        \r\n        {/* <TextField style={{width: '40%'}} variant=\"outlined\" type=\"date\" id=\"birthDate\" name=\"birthDate\"/><br /> */}\r\n        \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" defaultValue={userProfile.email} type=\"email\" id=\"email\" label='E-mail' name=\"email\" onChange={this.handleChange} /><br />\r\n        \r\n        {/* <TextField style={{width: '40%'}} variant=\"outlined\" value={userProfile.password} type=\"password\" id=\"password\" label='Password' name=\"password\" onChange={this.handleChange} /><br /> */}\r\n\r\n\r\n        <Button color=\"primary\" variant=\"contained\" onClick={this.handleSubmit}>Submit</Button>\r\n      </form>\r\n      </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withUser(UpdateProfile)\r\n","import React, { Component } from 'react'\r\nimport apiHandler from '../api/apiHandler'\r\nimport '../styles/dashboard.css'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\n\r\nclass Dashboard extends Component {\r\n\r\n    state = {\r\n        user: null\r\n    }\r\n\r\n    capitalize = (s) => {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n      }\r\n\r\n    componentDidMount = () => {\r\n        apiHandler\r\n            .getProfile()\r\n            .then((res) => {\r\n                this.setState({\r\n                    user: res.data\r\n                })\r\n            })\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n    handleDelete = (id) => {\r\n        console.log(id)\r\n        apiHandler\r\n            .deleteTrip(id)\r\n            .then((apiRes) => {\r\n                console.log('toto')\r\n                const newUser = {...this.state.user}\r\n                const idToDelete = newUser.trips.indexOf(id)\r\n                newUser.trips.splice(idToDelete, 1)\r\n                apiHandler\r\n                    .modifyProfile(newUser)\r\n                    .then((apiRes) => {\r\n                        console.log(apiRes)\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(err)\r\n                    })\r\n                \r\n                window.location.reload(false)\r\n            })\r\n            .catch((apiErr) => {\r\n                console.log(apiErr)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        // console.log(this.state.user && this.state.user.trips[0].destination)\r\n        const loaded = this.state.user && this.state.user.trips\r\n        console.log(this.props)\r\n\r\n        return (<section className=\"dashboard\">\r\n            <div className=\"dashboard-head\">\r\n                <h1> Welcome To Your Dashboard</h1>&nbsp;\r\n                <h3> This is the place to manage your trips ! </h3>&nbsp;\r\n                <p> In the dashboard you can edit your trips, take a look at your past trips if you want to share what you did to friends, and even delete them if you're sure to never forget ! </p>&nbsp;\r\n                <p>Nota bene: You shouldn't book more than 2 activities per day, otherwise the schedule will be tight</p>\r\n            </div>\r\n                <table className=\"dashboard-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <td>Destination</td>\r\n                            <td>Start Date</td>\r\n                            <td>End Date</td>\r\n                            <td>View/Edit Trip</td>\r\n                            <td>Delete Trip</td>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {loaded ? this.state.user.trips.map((obj, i) => (<tr>\r\n                            <td key={i} className=\"to-stylize\">{this.capitalize(obj.destination)}</td>\r\n                            <td className=\"to-stylize\">{obj.dateBegin.substr(0,10)}</td>\r\n                            <td className=\"to-stylize\">{obj.dateEnd.substr(0,10)}</td>\r\n                            <td><a href={`/trip/${obj._id}`}><Button variant=\"contained\" color=\"primary\">View Details</Button></a></td>\r\n                            <td><Button variant=\"contained\" onClick={() => this.handleDelete(obj._id)}>Delete</Button></td>\r\n                            \r\n                        </tr>))\r\n                         : <td>is Loading</td>}\r\n                    </tbody>\r\n                </table>\r\n\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Dashboard","import React, { Component } from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport '../styles/footer.css'\r\n\r\nclass FooterMain extends Component {\r\n    render() {\r\n        return (\r\n        <section className=\"footer\">\r\n            <div className=\"footer-info\">\r\n                <h2>Made In </h2>&nbsp;\r\n                <img src=\"/images/js.png\" alt=\"javaScript\" style={{width: 'auto', height: \"50px\"}}/>&nbsp;\r\n                <h2>with</h2>&nbsp;\r\n                <img src=\"/images/reactjs.png\" alt=\"React\" style={{width: 'auto', height: \"50px\"}}/>&nbsp;\r\n                <h2>&</h2>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                <img src=\"/images/nodejs.png\" alt=\"Node\" style={{width: 'auto', height: \"50px\"}}/>&nbsp;&nbsp;&nbsp;&nbsp;\r\n\r\n                <h2>by Timothée Nicole for</h2>&nbsp;&nbsp;&nbsp;\r\n                \r\n                <a href=\"https://www.ironhack.com\" target=\"_blank\"><img src=\"/images/ironhack.png\" alt=\"IronHack\" style={{width: 'auto', height: \"50px\"}}/></a>&nbsp;\r\n            </div>\r\n            \r\n            <div className=\"social-network\">\r\n            <a href=\"https://github.com/timothee-nicole\" target=\"_blank\"><img src=\"/images/github.png\" alt=\"GitHub\" style={{width: 'auto', height: \"50px\"}}/></a>&nbsp;&nbsp;&nbsp;&nbsp;\r\n            <a href=\"https://www.linkedin.com/in/timoth%C3%A9e-nicole/\" target=\"_blank\"><img src=\"/images/ln.png\" alt=\"LinkdIn\" style={{width: 'auto', height: \"50px\"}}/></a>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                \r\n            </div>\r\n                \r\n        </section>\r\n        )\r\n    }\r\n}\r\nexport default FooterMain","import React from \"react\";\r\nimport ReactMapboxGl, { Layer, Feature } from \"react-mapbox-gl\";\r\nimport Button from '@material-ui/core/Button'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\n\r\nconst Map = ReactMapboxGl({\r\n  accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\r\n});\r\n\r\nconst pointsOfInterestImg = new Image(35, 35);\r\npointsOfInterestImg.src = \"https://img.icons8.com/ios/452/point-of-interest.png\";\r\npointsOfInterestImg.crossOrigin = \"Anonymous\";\r\n\r\nclass AppMap extends React.PureComponent {\r\n  \r\n    state = {\r\n    lng: null,\r\n    lat: null,\r\n    zoom: 1 // used for map zoom level\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(this.props.destination)\r\n      if (this.props.destination === \"paris\"){\r\n          console.log('paris')\r\n          this.setState({\r\n            lng: 2.34,\r\n            lat: 48.86,\r\n            zoom: 12\r\n        })\r\n    } else if (this.props.destination === \"london\") {\r\n        console.log('london')\r\n        this.setState({\r\n            lng: -0.12,\r\n            lat: 51.51,\r\n            zoom: 13,\r\n        })\r\n    } else if (this.props.destination === \"barcelona\") {\r\n        console.log('barcelona')\r\n        this.setState({\r\n            lat: 41.39,\r\n            lng: 2.155,\r\n            zoom: 13,\r\n        })\r\n    } else if (this.props.destination === \"berlin\") {\r\n        console.log(\"berlin\")\r\n        this.setState({\r\n            lat: 52.52,\r\n            lng: 13.4,\r\n            zoom: 13,\r\n        })\r\n    };\r\n\r\n  }\r\n\r\n  handleClick = (selectedItem) => {\r\n    // Pass the selectedItem back to the parent.\r\n    this.props.handleSelectItem(selectedItem);\r\n  };\r\n\r\n  render() {\r\n    // console.log(this.props.id)\r\n\r\n    return (\r\n        <>\r\n        <div className='back-button'>\r\n            <NavLink exact to={`/trip/${this.props.id}`}><Button color=\"primary\" variant=\"contained\" className='back-button'>Back to the Trip Page</Button></NavLink>\r\n        </div>\r\n     {this.state.lat ? <Map\r\n        style={\"mapbox://styles/mapbox/light-v10\"}\r\n        zoom={[this.state.zoom]}\r\n        containerStyle={{\r\n          top: 70,\r\n          left: 0,\r\n          bottom: 5,\r\n          right: 0,\r\n          position: 'fixed'}}\r\n          center={[this.state.lng, this.state.lat]} >\r\n    \r\n            (<Layer type=\"symbol\" id=\"marker\" images={[\"poi-icon\", pointsOfInterestImg]} layout={{ \"icon-image\": \"poi-icon\" }}>\r\n            {this.props.pointsOfInterest && this.props.pointsOfInterest.map((obj, i) => \r\n                <Feature onClick={(e) => this.handleClick(obj)}  key={i} coordinates={[obj.geometry.coordinates[0], obj.geometry.coordinates[1]]} />\r\n             )} \r\n            </Layer>)  \r\n      \r\n    \r\n      </Map> : <div>Content is loading</div>\r\n      }\r\n\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppMap;\r\n","import React from 'react'\r\nimport '../styles/eachTour.css'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nexport default function eachTour(props) {\r\n    let tours = props.pointsOfInterest\r\n    console.log(props.pointsOfInterest)\r\n    return (\r\n        <div>\r\n            {tours ?\r\n                 (\r\n                    <div className=\"display-item\">\r\n                    <div className=\"tourDescription\">\r\n                        <h2>{tours.properties.name}</h2>\r\n                        <p> rate: \r\n                        {'★'.repeat(Math.round(tours.properties.rate))}\r\n                        {'☆'.repeat(3 - Math.round(tours.properties.rate))}</p>\r\n                        <p>Tags: {tours.properties.kinds.replaceAll(',', ', ').replaceAll('_', ' ')}</p>  \r\n                    </div>\r\n                    <div className=\"add-to-trip\">\r\n                        <Button onClick={() => props.addToTrip({geometry: tours.geometry, properties: tours.properties})} color=\"primary\" variant=\"contained\">\r\n                        Add to my trip\r\n                        </Button>\r\n                    </div>\r\n                    </div>\r\n            ) : console.log('Content is loading')}\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport apiHandler from '../api/apiHandler'\r\nimport AppMap from '../components/AppMap'\r\nimport { withUser } from '../components/Auth/withUser'\r\nimport EachPOI from '../components/EachPOI'\r\n\r\n\r\nclass SearchPagePOI extends Component {\r\n    \r\n    state = {\r\n        data: \"\",\r\n        destination: this.props.location.state.trip.destination,\r\n        id: this.props.location.state.trip._id\r\n    }\r\n\r\n    \r\n    addToTrip = async (id) => {\r\n        // console.log(id)\r\n        try {\r\n            const dbRes = await apiHandler.getOneTrip(this.props.location.state.trip._id)\r\n\r\n            const newTrip = {...dbRes}\r\n            newTrip.pointsOfInterest.push(id)\r\n            console.log(newTrip)\r\n\r\n          const apiRes = await apiHandler.modifyTrip(this.props.location.state.trip._id, newTrip)\r\n                console.log(apiRes)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }    \r\n    }\r\n        \r\n    \r\n\r\n    componentDidMount() {\r\n        // console.log(this.state)\r\n\r\n        apiHandler\r\n            .getPointsOfInterest(this.state.destination)\r\n            .then((apiRes) => {\r\n                // console.log(apiRes.data.features)\r\n                const filteredData = apiRes.data.features.filter((obj) => {\r\n                    return obj.properties.rate <= 3\r\n                })\r\n                filteredData.sort((a, b) => {\r\n                   return a.properties.rate < b.properties.rate ? 1 : a.properties.rate > b.properties.rate ? -1 : 0 \r\n                })\r\n                // console.log(filteredData)\r\n                this.setState({\r\n             data: filteredData\r\n            })})\r\n    }\r\n    \r\n    \r\n    handleNewSearch = (search) => {\r\n        if(!search){\r\n        apiHandler\r\n        .getPointsOfInterest(this.state.destination)\r\n        .then((apiRes) => {\r\n            // console.log(apiRes)\r\n            const filteredData = apiRes.data.features.filter((obj) => {\r\n                return obj.properties.rate <= 3\r\n            })\r\n            filteredData.sort((a, b) => {\r\n               return a.properties.rate < b.properties.rate ? 1 : a.properties.rate > b.properties.rate ? -1 : 0 \r\n            })\r\n            this.setState({\r\n                data: filteredData\r\n            })\r\n        })\r\n        }else{\r\n            console.log(search)\r\n            \r\n            const copyData = [...this.state.data]\r\n                    \r\n                //   console.log()\r\n            this.setState({ \r\n                data: copyData.filter((obj,i) => {\r\n                return (obj.properties.name.includes(search))}\r\n                )\r\n            })\r\n        }\r\n    }\r\n                                \r\n    onSelectItem = (selectedItem) => {\r\n        this.setState({ selectedItem: selectedItem });\r\n      };\r\n                               \r\n                                \r\n                                \r\n    render() {\r\n        return (\r\n            <div>&nbsp;\r\n                <EachPOI pointsOfInterest={this.state.selectedItem} addToTrip={this.addToTrip} />\r\n                <AppMap id={this.state.id} handleSelectItem={this.onSelectItem} destination={this.state.destination} pointsOfInterest={this.state.data}/>\r\n                   \r\n            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withUser(SearchPagePOI)\r\n","import React from 'react'\r\nimport '../styles/eachTour.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function eachTour(props) {\r\n    let tours = props.tourList\r\n    console.log(props)\r\n    return (\r\n        <div>\r\n        <div className='back-button'>\r\n            <NavLink exact to={`/trip/${props.id}`}><Button color=\"primary\" variant=\"contained\" className='back-button'>Back to the Trip Page</Button></NavLink>\r\n        </div>\r\n            {tours ? tours.map((obj, i) =>{\r\n                return (\r\n                    <div className=\"tourCards\" key={i}>\r\n                    <img src={obj.pictures[0]} alt={obj.name} />\r\n                    <div className=\"tourDescription\">\r\n                        <NavLink exact to={`/activity/${obj._id}`}>\r\n                        <h2>{obj.name}</h2>\r\n                        </NavLink>\r\n                        <p>{obj.shortDescription}</p>\r\n                    </div>\r\n                    <div className=\"bookTour\">\r\n                        <h3>From € {obj.price.amount} per person</h3><br />\r\n                        <Button key={i}  onClick={() => props.addToTrip(obj._id)} color=\"primary\" variant=\"contained\">\r\n                        Add to my trip\r\n                        </Button><br />\r\n                        <Button href={obj.bookingLink} color=\"secondary\" variant=\"contained\">Book Now</Button>\r\n                    </div>\r\n                    </div>\r\n            )}) : (<h1> Content is loading </h1>)}\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    color: props => props.color,\r\n    width: '80%',\r\n    display: \"flex\",\r\n    justifyContent: 'center',\r\n  },\r\n  child: {\r\n    width: '200%',\r\n  }\r\n});\r\n\r\nconst highOrderComponent = (ComponentToPassStyleTo) => {\r\n  return (props) => \r\n    { const classes = useStyles()\r\n      return <ComponentToPassStyleTo {...props} classes={classes} />}\r\n}\r\n\r\nclass SearchBar extends Component {\r\n\r\n  \r\n  state ={\r\n    search : \"\",\r\n    // filter: true\r\n  }\r\n \r\n  handleChange = (event) =>{\r\n    // console.log(event.target.value);\r\n\r\n    let value = event.target.value;\r\n    // const key = event.target.name;\r\n    \r\n    this.setState({search:value})\r\n    this.props.handleSearch(value)\r\n  }\r\n\r\n//   handleCheck = (evt) => {\r\n//     let value = evt.target.checked\r\n//     this.props.handleCheckBox(\r\n//       value\r\n//     )\r\n\r\n    // if (evt.target.checked === true) {\r\n    //   console.log(evt)\r\n    // } else {\r\n    //   console.log('toto')\r\n    // }\r\n//   }\r\n\r\n  render() {\r\n    const classes = this.props.classes\r\n    return (\r\n      <div className={`search-bar`}>\r\n        <Grid container spacing={1} alignItems=\"flex-end\" className={classes.root}>\r\n          <Grid item>\r\n            <SearchIcon />\r\n          </Grid>\r\n          <Grid item>\r\n            <TextField className={classes.child} label=\"Search\" id=\"search\" name=\"search\" onChange={this.handleChange} />\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default highOrderComponent(SearchBar)","import React, { Component } from 'react'\r\nimport apiHandler from '../api/apiHandler'\r\nimport {withUser} from '../components/Auth/withUser'\r\nimport EachTour from '../components/EachTour'\r\nimport SearchBar from '../components/SearchBar'\r\n\r\nclass SearchPage extends Component {\r\n\r\n    \r\n    \r\n    state = {\r\n        data: \"\",\r\n        destination: this.props.location.state.trip.destination,\r\n        id: this.props.location.state.trip._id\r\n    }\r\n\r\n    \r\n    addToTrip = async (id) => {\r\n        console.log(id)\r\n        try {\r\n            const dbRes = await apiHandler.getOneTrip(this.props.location.state.trip._id)\r\n\r\n            const newTrip = {...dbRes}\r\n            newTrip.tour.push(id)\r\n            console.log(newTrip)\r\n\r\n          const apiRes = await apiHandler.modifyTrip(this.props.location.state.trip._id, newTrip)\r\n                console.log(apiRes)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }    \r\n    }\r\n        \r\n    \r\n\r\n    componentDidMount() {\r\n        console.log(this.state)\r\n\r\n        apiHandler\r\n            .getActivities(this.state.destination)\r\n            .then((apiRes) => {\r\n                this.setState({\r\n             data: apiRes.data\r\n            })})\r\n    }\r\n    \r\n    \r\n    handleNewSearch=(search)=> {\r\n        if(!search){\r\n        apiHandler\r\n        .getActivities(this.state.destination)\r\n        .then((apiRes) => {\r\n            console.log(apiRes)\r\n            this.setState({\r\n                data: apiRes.data\r\n            })\r\n        })\r\n        }else{\r\n            console.log(search)\r\n            \r\n            const copyData = [...this.state.data]\r\n                    \r\n                  // console.log(copyData[0].name)\r\n            this.setState({ \r\n                data: copyData.filter((obj,i) => {\r\n                return (obj.name.includes(search))}\r\n                )\r\n            })\r\n        }\r\n    }\r\n                                \r\n                                \r\n                                \r\n                                \r\n    render() {\r\n    // console.log('toto :', this.state.data)\r\n    // let activities = this.state.data\r\n        return (\r\n            <div>\r\n                <SearchBar handleSearch={this.handleNewSearch}/>\r\n                <EachTour id={this.state.id} tourList={this.state.data} addToTrip={this.addToTrip} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withUser(SearchPage)\r\n","import React, { Component } from 'react'\r\nimport apiHandler from '../api/apiHandler'\r\nimport Button from '@material-ui/core/Button'\r\nimport '../styles/one-tour.css'\r\n\r\nexport default class OneTour extends Component {\r\n\r\n    state = {\r\n        tour: {}\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        apiHandler\r\n            .getOneActivity(this.props.match.params.id)\r\n            .then((apiRes) => {\r\n                this.setState({\r\n                    tour: apiRes.data\r\n                })\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state.tour);\r\n        return (\r\n            <div className=\"one-tour\">\r\n                {this.state.tour.name ? (<>\r\n                    <h1>{this.state.tour.name}</h1>\r\n                    <img src={this.state.tour.pictures[0]} alt={this.state.tour.name}/>\r\n                    <h2> Rate : {'★'.repeat(Math.round(this.state.tour.rating))}\r\n                        {'☆'.repeat(5 - Math.round(this.state.tour.rating))}</h2>\r\n                    <h2>Price : from €{this.state.tour.price.amount} per person</h2>\r\n                    <Button style={{margin: \"10px\"}} color=\"primary\" variant=\"contained\" href={this.state.tour.bookingLink} target=\"_blank\">Book Now </Button>\r\n                    <p>{this.state.tour.shortDescription}</p>\r\n\r\n\r\n                </>) : (<div>Content is loading</div>)}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport NavMain from \"./components/NavMain\";\r\nimport Home from \"./pages/Home\";\r\nimport Signin from \"./pages/Signin\";\r\nimport Signup from \"./pages/Signup\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\nimport Profile from \"./pages/Profile\";\r\nimport { ThemeProvider } from '@material-ui/core/styles'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\nimport theme from '../src/styles/theme'\r\nimport CreateTrip from \"./pages/trip/CreateTrip\"\r\nimport OneTrip from \"./pages/trip/OneTrip\";\r\nimport UpdateProfile from \"./pages/UpdateProfile\";\r\nimport Dashboard from \"./pages/Dashboard\";\r\nimport FooterMain from './components/FooterMain'\r\nimport SearchPagePOI from \"./pages/SearchPagePOI\";\r\nimport SearchPageActivities from \"./pages/SearchPageActivities\";\r\nimport OneTour from \"./pages/OneTour\"\r\n\r\nfunction App() {  \r\n\r\n  return (\r\n    <div className=\"App\">\r\n    <ThemeProvider theme={theme} >\r\n      <CssBaseline />\r\n      <NavMain />\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Home} />\r\n        <Route exact path=\"/signin\" component={Signin} />\r\n        <Route exact path=\"/signup\" component={Signup} />\r\n        <ProtectedRoute exact path=\"/profile\" component={Profile} />\r\n        <ProtectedRoute exact path=\"/dashboard\" component={Dashboard} />\r\n        <ProtectedRoute exact path=\"/create-trip\" component={CreateTrip} />\r\n        <ProtectedRoute exact path=\"/trip/:id\" component={OneTrip} />\r\n        <ProtectedRoute exact path=\"/search/activities\" component={SearchPageActivities} />\r\n        <ProtectedRoute exact path=\"/activity/:id\" component={OneTour} />\r\n        <ProtectedRoute exact path=\"/profile/edit\" component={UpdateProfile} />\r\n        <ProtectedRoute exact path=\"/search/points-of-interest\" component={SearchPagePOI} />\r\n      </Switch>\r\n      <FooterMain />\r\n    </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport UserProvider from \"./components/Auth/UserProvider\";\r\nimport App from \"./App\";\r\n\r\nimport \"./styles/reset.css\";\r\nimport \"./styles/global.css\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <UserProvider>\r\n      <App />\r\n    </UserProvider>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}