(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,a){e.exports=a(159)},140:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},151:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),o=a.n(i),l=a(15),c=a(7),s=a(8),u=a(11),m=a(10),d=a(98),p=a.n(d).a.create({baseURL:"https://trip-karmeliet.herokuapp.com",withCredentials:!0});function h(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var f=function(e){return p.post("/api/auth/signup",e).then((function(e){return e.data})).catch(h)},g=function(e){return p.post("/api/auth/signin",e).then((function(e){return e.data})).catch(h)},E=function(){return p.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(h)},b=function(){return p.get("/api/auth/logout").then((function(e){return e.data})).catch(h)},v=function(){return p.get("/api/profile/me").then((function(e){return e})).catch(h)},y=function(e){return p.patch("/api/profile/edit",e).then((function(e){return e})).catch(h)},O=function(e){return p.get("/api/trip/"+e).then((function(e){return e.data})).catch(h)},j=function(e){return p.post("/api/trip",e).then((function(e){return e.data})).catch(h)},k=function(e,t){return p.patch("/api/trip/"+e,t).then((function(e){return e.data})).catch(h)},N=function(e){return p.delete("/api/trip/"+e).then((function(e){return e.data})).catch(h)},w=function(e){return p.get("/api/activity/destination/"+e).then((function(e){return e})).catch(h)},C=function(e){return p.get("api/openTripMap/"+e).then((function(e){return e})).catch(h)},x=r.a.createContext(),S=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return r.a.createElement(x.Provider,{value:e},this.props.children)}}]),a}(n.Component),D=a(16),I=function(e){return function(t){return r.a.createElement(x.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},T=a(160),L=a(194),A=(a(140),I(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLogout=function(){b().then((function(){e.props.context.removeUser()})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"NavMain"},r.a.createElement(l.c,{exact:!0,to:"/"},r.a.createElement("img",{src:"/images/logo.png",alt:"Logo"})),this.props.context.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"nav-trip"},r.a.createElement(T.a,{color:"secondary",variant:"contained"},r.a.createElement(l.c,{to:"/create-trip"},"+ Create a New Trip"))," \xa0",r.a.createElement(T.a,{color:"secondary",variant:"contained"},r.a.createElement(l.c,{to:"/dashboard"},"My Dashboard"))),r.a.createElement("ul",{className:"nav-log"},r.a.createElement(L.a,{variant:"contained",color:"secondary","aria-label":"contained primary button group"},r.a.createElement(T.a,null,r.a.createElement(l.c,{to:"/profile"},this.props.context.user&&this.props.context.user.firstName)),r.a.createElement(T.a,null,r.a.createElement("p",{onClick:this.handleLogout},"Logout"))))),!this.props.context.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"nav-log"},r.a.createElement(L.a,{variant:"contained",color:"secondary","aria-label":"contained primary button group"},r.a.createElement(T.a,null,r.a.createElement(l.c,{to:"/signin"},"Log in")),r.a.createElement(T.a,null,r.a.createElement(l.c,{to:"/signup"},"Create account"))))))}}]),a}(r.a.Component))),M=(a(145),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home"},r.a.createElement("h1",null,"Welcome To Trip & Karmeliet"),r.a.createElement("p",null,"With T&K planning your holiday has never been so easy !"),r.a.createElement("p",null," Pick a destination, choose your activities, and hop-on the next plane to live an unforgettable adventure"),r.a.createElement("br",null),r.a.createElement(T.a,{variant:"contained",color:"primary"},"Create my first Trip !")),r.a.createElement("div",{className:"image-line"},r.a.createElement("div",null,"BARCELONA - BERLIN - PARIS - LONDON")))}}]),a}(r.a.Component)),U=a(28),P=a(206),_=(a(146),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){var a=t.target.name,n="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(U.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),g(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"backgroundFormSignIn"},r.a.createElement("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,className:"form"},r.a.createElement("img",{src:"/favicon.ico",alt:"toto"}),r.a.createElement("br",null),r.a.createElement("h1",null,"Please Sign In"),r.a.createElement(P.a,{style:{width:"40%"},type:"email",id:"email",name:"email",label:"E-mail",variant:"outlined",className:"input"}),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},type:"password",id:"password",variant:"outlined",label:"Password",name:"password",className:"input"}),r.a.createElement("br",null),r.a.createElement(T.a,{color:"primary",variant:"contained",type:"button",onClick:this.handleSubmit},"Submit")))}}]),a}(n.Component));_.contextType=x;var B=Object(D.g)(_),F=function(e){return r.a.createElement(B,null)},z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",lastName:"",firstName:"",birthDate:""},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value,n=t.target.name;e.setState(Object(U.a)({},n,a)),console.log(e.state)},e.handleSubmit=function(t){t.preventDefault(),f(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"backgroundFormSignUp"},r.a.createElement("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,className:"form"},r.a.createElement("img",{src:"/favicon.ico",alt:"toto"}),r.a.createElement("br",null),r.a.createElement("h1",null,"Please Sign Up"),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},variant:"outlined",type:"text",id:"firstName",label:"First Name",name:"firstName"}),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},variant:"outlined",type:"text",id:"lastName",label:"Last Name",name:"lastName"}),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},variant:"outlined",type:"email",id:"email",label:"E-mail",name:"email"}),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},variant:"outlined",type:"password",id:"password",label:"Password",name:"password"}),r.a.createElement("br",null),r.a.createElement(T.a,{color:"primary",variant:"contained",onClick:this.handleSubmit},"Submit")))}}]),a}(n.Component);z.contextType=x;var Y=Object(D.g)(z),R=function(e){return r.a.createElement(Y,null)},V=a(106),J=I((function(e){var t=e.component,a=e.context,n=Object(V.a)(e,["component","context"]);return a.isLoading?null:a.isLoggedIn?r.a.createElement(D.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(D.a,{to:"/signin"})})),W=(a(147),I((function(e){var t=e.context.user;return r.a.createElement("div",{className:"profile"},r.a.createElement("h1",null," Hey ",t.firstName," !")," \xa0",r.a.createElement("div",{className:"profile-details"},r.a.createElement("img",{src:t.profilePicture,alt:t.firstName}),r.a.createElement("h3",null,"Please find your information below : "),r.a.createElement("p",null,"First Name : ",t.firstName,r.a.createElement("br",null),"Last Name : ",t.lastName,r.a.createElement("br",null),"E-mail : ",t.email)),r.a.createElement(l.c,{to:"/profile/edit"},r.a.createElement(T.a,{color:"primary",variant:"contained"},"Modify My Profile")))}))),G=a(201),K=a(202),q=a(105),H=Object(q.a)({palette:{primary:{main:"#0800a3",light:"#554dff",dark:"#737373"},secondary:{main:"#f1c232ff",light:"#f0cc00"},error:{main:"#ff0505"}}}),Q=a(26),Z=a(207),X=a(197),$=a(203),ee=a(209),te=I(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={dateBegin:"",dateEnd:"",destination:"",tripLength:0,error:!1},e.handleChange=function(t){t.preventDefault();var a=t.target.name,n=t.target.value;e.setState(Object(U.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();var a=Math.round((Date.parse(e.state.dateEnd)-Date.parse(e.state.dateBegin))/864e5+1);(a<=0||!e.state.destination)&&e.setState({error:!e.state.error});var n=Object(Q.a)({},e.props.context.user);e.setState({tripLength:a}),console.log(a),a<=0||j(e.state).then((function(t){n.trips.push(t._id),y(n).then((function(e){console.log(e)})),e.props.history.push("/trip/".concat(t._id))})).catch((function(e){}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Create Your Trip !"),"\xa0",r.a.createElement("p",null,"Start by picking your trip dates and the destination you are going to ! ",r.a.createElement("br",null),r.a.createElement("br",null)," You will then arrive on your Trip page from which you can have a look at what you planned. ",r.a.createElement("br",null),r.a.createElement("br",null)," You will also be able to search for interesting activities and points of interest in that destination, pick them up and let us create the perfect schedule ! "),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(P.a,{style:{width:"45%"},type:"date",variant:"outlined",defaultValue:"2020-07-14",label:"Start Date",name:"dateBegin",required:!0})," \xa0",r.a.createElement(P.a,{style:{width:"45%"},type:"date",variant:"outlined",defaultValue:"2020-07-21",label:"End Date",name:"dateEnd",required:!0})),r.a.createElement("br",null),r.a.createElement(X.a,{variant:"outlined",style:{width:"70%"}},r.a.createElement(Z.a,{id:"destination"},"Destination"),r.a.createElement($.a,{labelId:"destination",name:"destination",placeholder:"Destination",onChange:this.handleChange},r.a.createElement(ee.a,{value:""},"None"),r.a.createElement(ee.a,{value:"paris"},"Paris"),r.a.createElement(ee.a,{value:"london"},"London"),r.a.createElement(ee.a,{value:"berlin"},"Berlin"),r.a.createElement(ee.a,{value:"barcelona"},"Barcelona")),r.a.createElement("br",null),r.a.createElement("div",null," ",this.state.error?r.a.createElement("p",null," Invalid date or destination"):""),r.a.createElement(T.a,{color:"primary",variant:"contained",type:"button",onClick:this.handleSubmit},"Create Trip"))))}}]),a}(n.Component)),ae=a(33),ne=(a(148),a(44)),re=a(204),ie=a(103),oe=a.n(ie);function le(e){var t=Object(re.a)({item:{type:"function",name:e.name,image:e.image,id:e.id,object:e},collect:function(e){return{isDragging:!!e.isDragging()}}}),a=Object(ne.a)(t,2),n=(a[0].isDragging,a[1]);return r.a.createElement("div",{className:"activities-card",ref:n},r.a.createElement("img",{style:{width:"100%"},src:e.image,alt:e.name}),r.a.createElement("p",null,e.name.substr(0,18),"..."),r.a.createElement(oe.a,{onClick:function(){return function(t){var a=Object(Q.a)({},e.object.details),n=a.tour.find((function(t){return t._id===e.id})),r=a.tour.indexOf(n);a.tour.splice(r,1),k(e.object.details._id,a).then((function(e){window.location.reload(!1),console.log(e)})).catch((function(e){console.log(e)}))}(e.id)}}))}var ce=a(198),se=a(79),ue=a(205);function me(e){var t=Object(n.useContext)(de).markAsDone,a=Object(ue.a)({accept:"function",drop:function(a,n){t(a.id,e.index)},collect:function(e){return{isOver:!!e.isOver(),dropResult:e.getItem()}}}),i=Object(ne.a)(a,2),o=i[0],l=(o.dropResult,o.isOver),c=i[1];return r.a.createElement("td",{ref:c,style:{heigth:"50px",width:"50px",margin:"10px",padding:"10px",background:"#fff",backgroundColor:l?"cornflowerblue":"white"},onDrop:function(e,t){},value:e.key}," Drop the Activity here ! ",e.children)}var de=Object(n.createContext)({markAsDone:null});function pe(e){var t=function(e,t){};return console.log(e.details,"props dets",e.numberOfDay),r.a.createElement(de.Provider,{value:{markAsDone:function(t,a){var n=Object(Q.a)({},e.details),r=Object(ae.a)(n.organisation);r.push({tourId:t,day:a}),n.organisation=r,k(e.details._id,n).then((function(t){e.handleTour(t)})).catch((function(e){}))}}},r.a.createElement("div",null,r.a.createElement("div",{className:"activities-and-points"}),r.a.createElement("div",{className:"points-of-interest"},r.a.createElement("h1",{style:{textDecoration:"underline"}},"Your Points of Interest: "),r.a.createElement("div",{className:"scroll-interest"},e.details?e.details.pointsOfInterest.map((function(e,t){return r.a.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",margin:"5px"}},r.a.createElement("h3",null,e.properties.name),r.a.createElement("p",null,"\u2605".repeat(Math.round(e.properties.rate)),"\u2606".repeat(3-Math.round(e.properties.rate))))})):r.a.createElement("div",null,"content is loading"))),r.a.createElement("div",{className:"all-activities"},r.a.createElement("h1",null,"Your Activities: "),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},e.details?e.details.tour.map((function(a,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(ce.a,{backend:se.a},r.a.createElement(le,{link:a.bookingLink,image:a.pictures[0],name:a.name,id:a._id,object:e,onDrop:t})))})):r.a.createElement("div",null," Content is loading"))),r.a.createElement("div",{className:"trip-table"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,e.details&&e.numberOfDay.map((function(e,t){return r.a.createElement("td",{key:t},"Day ",e)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,e.details&&e.numberOfDay.map((function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(ce.a,{backend:se.a},r.a.createElement(me,{index:a},e.details&&e.details.organisation&&e.details.organisation.find((function(e){return e.day===a}))&&e.details.organisation.find((function(e){return e.day===a})).day===a?r.a.createElement(le,{name:e.details.organisation.find((function(e){return e.day===a})).tourId.name,image:e.details.organisation.find((function(e){return e.day===a})).tourId.pictures[0]}):null)))})))))),"     "))}var he=I(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={trip:{},numberOfDay:null},e.capitalize=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},e.handleTour=function(t){e.setState({trip:t})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;O(this.props.match.params.id).then((function(t){var a=Math.round((Date.parse(t.dateEnd)-Date.parse(t.dateBegin))/864e5)+1,n=Object(ae.a)(Array(a).keys()).map((function(e){return e+1}));e.setState({trip:t,numberOfDay:n})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("section",{className:"one-trip"},r.a.createElement("div",{className:"destination",style:{backgroundImage:"url('/images/".concat(this.state.trip.destination,".jpg')"),backgroundRepeat:"no-repeat"}},r.a.createElement("h1",null,"Your trip to ",this.capitalize(this.state.trip.destination)," will be unforgettable!"),r.a.createElement("p",null,this.capitalize(this.state.trip.destination)," is a really nice destination, it's sure that you will enjoy your trip ! But why not adding some spices to this adventure ? "),r.a.createElement(T.a,{color:"primary",variant:"contained"},r.a.createElement(l.b,{to:{pathname:"/search/activities",state:{trip:this.state.trip}}},"Search activities")),"\xa0",r.a.createElement(T.a,{color:"primary",variant:"contained"},r.a.createElement(l.b,{to:{pathname:"/search/points-of-interest",state:{trip:this.state.trip}}},"Search Points of Interest")),"\xa0"),this.state.numberOfDay?r.a.createElement(pe,{handleTour:this.handleTour,details:this.state.trip,numberOfDay:this.state.numberOfDay}):r.a.createElement("div",null,"Content is loading ..."))}}]),a}(n.Component)),fe=I(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value,n=t.target.name;e.setState(Object(U.a)({},n,a)),console.log(e.state)},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state),y(e.state).then((function(t){console.log(t),e.props.context.setUser(t.data),console.log(t)})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.context.user;return r.a.createElement("div",{className:"backgroundFormSignUp"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},r.a.createElement("img",{src:"/favicon.ico",alt:"toto"}),r.a.createElement("br",null),r.a.createElement("h1",null,"Update your Infos"),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},variant:"outlined",defaultValue:e.firstName,type:"text",id:"firstName",label:"First Name",name:"firstName",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},variant:"outlined",defaultValue:e.lastName,type:"text",id:"lastName",label:"Last Name",name:"lastName",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(P.a,{style:{width:"40%"},variant:"outlined",defaultValue:e.email,type:"email",id:"email",label:"E-mail",name:"email",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(T.a,{color:"primary",variant:"contained",onClick:this.handleSubmit},"Submit")))}}]),a}(n.Component)),ge=(a(151),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.capitalize=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},e.componentDidMount=function(){v().then((function(t){e.setState({user:t.data})})).catch((function(e){return console.log(e)}))},e.handleDelete=function(t){console.log(t),N(t).then((function(a){console.log("toto");var n=Object(Q.a)({},e.state.user),r=n.trips.indexOf(t);n.trips.splice(r,1),y(n).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),window.location.reload(!1)})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.user&&this.state.user.trips;return console.log(this.props),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dashboard-head"},r.a.createElement("h1",null," Welcome To Your Dashboard"),"\xa0",r.a.createElement("h3",null," This is the place to manage your trips ! "),"\xa0",r.a.createElement("p",null," In the dashboard you can edit your trips, take a look at your past trips if you want to share what you did to friends, and even delete them if you're sure to never forget ! "),"\xa0",r.a.createElement("p",null,"Nota bene: You shouldn't book more than 2 activities per day, otherwise the schedule will be tight")),r.a.createElement("table",{className:"dashboard-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Destination"),r.a.createElement("td",null,"Start Date"),r.a.createElement("td",null,"End Date"),r.a.createElement("td",null,"View/Edit Trip"),r.a.createElement("td",null,"Delete Trip"))),r.a.createElement("tbody",null,t?this.state.user.trips.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",{key:a},e.capitalize(t.destination)),r.a.createElement("td",null,t.dateBegin.substr(0,10)),r.a.createElement("td",null,t.dateEnd.substr(0,10)),r.a.createElement("td",null,r.a.createElement("a",{href:"/trip/".concat(t._id)},r.a.createElement(T.a,{variant:"contained",color:"primary"},"View Details"))),r.a.createElement("td",null,r.a.createElement(T.a,{variant:"contained",onClick:function(){return e.handleDelete(t._id)}},"Delete")))})):r.a.createElement("td",null,"is Loading"))))}}]),a}(n.Component)),Ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"70px",backgroundColor:"pink"}})}}]),a}(n.Component),be=a(51),ve=a.n(be),ye=a(67),Oe=a(70),je=Object(Oe.c)({accessToken:"pk.eyJ1IjoidGltb3RoZWVuaWNvbGUiLCJhIjoiY2tnaHQ1anR4MGd4MjJ6bGloaGs0NndoNiJ9.68YjNpz06_bCNKmnKAtIuw"}),ke=new Image(35,35);ke.src="https://img.icons8.com/ios/452/point-of-interest.png",ke.crossOrigin="Anonymous";var Ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={lng:null,lat:null,zoom:1},e.handleClick=function(t){e.props.handleSelectItem(t)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.destination),"paris"===this.props.destination?(console.log("paris"),this.setState({lng:2.34,lat:48.86,zoom:12})):"london"===this.props.destination?(console.log("london"),this.setState({lng:-.12,lat:51.51,zoom:13})):"barcelona"===this.props.destination?(console.log("barcelona"),this.setState({lat:41.39,lng:2.155,zoom:13})):"berlin"===this.props.destination&&(console.log("berlin"),this.setState({lat:52.52,lng:13.4,zoom:13}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"back-button"},r.a.createElement(l.c,{exact:!0,to:"/trip/".concat(this.props.id)},r.a.createElement(T.a,{color:"primary",variant:"contained",className:"back-button"},"Back to the Trip Page"))),this.state.lat?r.a.createElement(je,{style:"mapbox://styles/mapbox/light-v10",zoom:[this.state.zoom],containerStyle:{top:70,left:5,bottom:5,right:5,position:"fixed"},center:[this.state.lng,this.state.lat]},"(",r.a.createElement(Oe.b,{type:"symbol",id:"marker",images:["poi-icon",ke],layout:{"icon-image":"poi-icon"}},this.props.pointsOfInterest&&this.props.pointsOfInterest.map((function(t,a){return r.a.createElement(Oe.a,{onClick:function(a){return e.handleClick(t)},key:a,coordinates:[t.geometry.coordinates[0],t.geometry.coordinates[1]]})}))),")"):r.a.createElement("div",null,"Content is loading"))}}]),a}(r.a.PureComponent);a(97);function we(e){var t=e.pointsOfInterest;return console.log(e.pointsOfInterest),r.a.createElement("div",null,t?r.a.createElement("div",{className:"display-item"},r.a.createElement("div",{className:"tourDescription"},r.a.createElement("h2",null,t.properties.name),r.a.createElement("p",null," rate:","\u2605".repeat(Math.round(t.properties.rate)),"\u2606".repeat(3-Math.round(t.properties.rate))),r.a.createElement("p",null,"Tags: ",t.properties.kinds.replaceAll(",",", ").replaceAll("_"," "))),r.a.createElement("div",{className:"bookTour"},r.a.createElement(T.a,{onClick:function(){return e.addToTrip({geometry:t.geometry,properties:t.properties})},color:"primary",variant:"contained"},"Add to my trip"))):console.log("Content is loading"))}var Ce=I(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={data:"",destination:e.props.location.state.trip.destination,id:e.props.location.state.trip._id},e.addToTrip=function(){var t=Object(ye.a)(ve.a.mark((function t(a){var n,r,i;return ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O(e.props.location.state.trip._id);case 3:return n=t.sent,(r=Object(Q.a)({},n)).pointsOfInterest.push(a),console.log(r),t.next=9,k(e.props.location.state.trip._id,r);case 9:i=t.sent,console.log(i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),e.handleNewSearch=function(t){if(t){console.log(t);var a=Object(ae.a)(e.state.data);e.setState({data:a.filter((function(e,a){return e.properties.name.includes(t)}))})}else C(e.state.destination).then((function(t){var a=t.data.features.filter((function(e){return e.properties.rate<=3}));a.sort((function(e,t){return e.properties.rate<t.properties.rate?1:e.properties.rate>t.properties.rate?-1:0})),e.setState({data:a})}))},e.onSelectItem=function(t){e.setState({selectedItem:t})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;C(this.state.destination).then((function(t){var a=t.data.features.filter((function(e){return e.properties.rate<=3}));a.sort((function(e,t){return e.properties.rate<t.properties.rate?1:e.properties.rate>t.properties.rate?-1:0})),e.setState({data:a})}))}},{key:"render",value:function(){return r.a.createElement("div",null,"\xa0",r.a.createElement(we,{pointsOfInterest:this.state.selectedItem,addToTrip:this.addToTrip}),r.a.createElement(Ne,{id:this.state.id,handleSelectItem:this.onSelectItem,destination:this.state.destination,pointsOfInterest:this.state.data}))}}]),a}(n.Component));function xe(e){var t=e.tourList;return console.log(e),r.a.createElement("div",null,r.a.createElement("div",{className:"back-button"},r.a.createElement(l.c,{exact:!0,to:"/trip/".concat(e.id)},r.a.createElement(T.a,{color:"primary",variant:"contained",className:"back-button"},"Back to the Trip Page"))),t?t.map((function(t,a){return r.a.createElement("div",{className:"tourCards",key:a},r.a.createElement("img",{src:t.pictures[0],alt:t.name}),r.a.createElement("div",{className:"tourDescription"},r.a.createElement("h2",null,t.name),r.a.createElement("p",null,t.shortDescription)),r.a.createElement("div",{className:"bookTour"},r.a.createElement("h3",null,"From \u20ac ",t.price.amount," per person"),r.a.createElement("br",null),r.a.createElement(T.a,{key:a,onClick:function(){return e.addToTrip(t._id)},color:"primary",variant:"contained"},"Add to my trip"),r.a.createElement("br",null),r.a.createElement(T.a,{href:t.bookingLink,color:"secondary",variant:"contained"},"Book Now")))})):r.a.createElement("h1",null," Content is loading "))}var Se,De=a(200),Ie=a(104),Te=a.n(Ie),Le=a(199),Ae=Object(Le.a)({root:{color:function(e){return e.color},width:"80%",display:"flex",justifyContent:"center"},child:{width:"200%"}}),Me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleChange=function(t){var a=t.target.value;e.setState({search:a}),e.props.handleSearch(a)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:"search-bar"},r.a.createElement(De.a,{container:!0,spacing:1,alignItems:"flex-end",className:e.root},r.a.createElement(De.a,{item:!0},r.a.createElement(Te.a,null)),r.a.createElement(De.a,{item:!0},r.a.createElement(P.a,{className:e.child,label:"Search",id:"search",name:"search",onChange:this.handleChange}))))}}]),a}(n.Component),Ue=(Se=Me,function(e){var t=Ae();return r.a.createElement(Se,Object.assign({},e,{classes:t}))}),Pe=I(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={data:"",destination:e.props.location.state.trip.destination,id:e.props.location.state.trip._id},e.addToTrip=function(){var t=Object(ye.a)(ve.a.mark((function t(a){var n,r,i;return ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.prev=1,t.next=4,O(e.props.location.state.trip._id);case 4:return n=t.sent,(r=Object(Q.a)({},n)).tour.push(a),console.log(r),t.next=10,k(e.props.location.state.trip._id,r);case 10:i=t.sent,console.log(i),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleNewSearch=function(t){if(t){console.log(t);var a=Object(ae.a)(e.state.data);e.setState({data:a.filter((function(e,a){return e.name.includes(t)}))})}else w(e.state.destination).then((function(t){console.log(t),e.setState({data:t.data})}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state),w(this.state.destination).then((function(t){e.setState({data:t.data})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ue,{handleSearch:this.handleNewSearch}),r.a.createElement(xe,{id:this.state.id,tourList:this.state.data,addToTrip:this.addToTrip}))}}]),a}(n.Component));var _e=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(G.a,{theme:H},r.a.createElement(K.a,null),r.a.createElement(A,null),r.a.createElement(D.d,null,r.a.createElement(D.b,{exact:!0,path:"/",component:M}),r.a.createElement(D.b,{exact:!0,path:"/signin",component:F}),r.a.createElement(D.b,{exact:!0,path:"/signup",component:R}),r.a.createElement(J,{exact:!0,path:"/profile",component:W}),r.a.createElement(J,{exact:!0,path:"/dashboard",component:ge}),r.a.createElement(J,{exact:!0,path:"/create-trip",component:te}),r.a.createElement(J,{exact:!0,path:"/trip/:id",component:he}),r.a.createElement(J,{exact:!0,path:"/search/activities",component:Pe}),r.a.createElement(J,{exact:!0,path:"/profile/edit",component:fe}),r.a.createElement(J,{exact:!0,path:"/search/points-of-interest",component:Ce})),r.a.createElement(Ee,null)))};a(157),a(158);o.a.render(r.a.createElement(l.a,null,r.a.createElement(S,null,r.a.createElement(_e,null))),document.getElementById("root"))},97:function(e,t,a){}},[[118,1,2]]]);
//# sourceMappingURL=main.b59bcc03.chunk.js.map