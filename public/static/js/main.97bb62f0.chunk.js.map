{"version":3,"sources":["api/apiHandler.js","components/Auth/UserContext.jsx","components/Auth/UserProvider.jsx","components/Auth/withUser.jsx","components/NavMain.jsx","pages/Home.jsx","components/Forms/FormSignin.jsx","pages/Signin.jsx","components/Forms/FormSignup.jsx","pages/Signup.jsx","components/ProtectedRoute.jsx","pages/Profile.jsx","styles/theme.js","pages/trip/CreateTrip.jsx","components/DraggableTour.jsx","components/DropTarget.jsx","components/DragAndDrop.jsx","pages/trip/OneTrip.jsx","pages/UpdateProfile.jsx","pages/Dashboard.jsx","components/FooterMain.jsx","components/AppMap.jsx","components/EachPOI.jsx","pages/SearchPagePOI.jsx","components/EachTour.jsx","components/SearchBar.jsx","pages/SearchPageActivities.jsx","App.jsx","index.js"],"names":["service","axios","create","baseURL","process","withCredentials","errorHandler","error","response","data","console","log","userInfo","post","then","res","catch","get","apiRes","patch","id","delete","desti","UserContext","React","createContext","UserProvider","state","user","isLoggedIn","isLoading","setUser","setState","removeUser","apiHandler","authValues","this","Provider","value","props","children","Component","withUser","ComponentToPassUserContextTo","Consumer","context","handleLogout","className","exact","to","src","alt","Fragment","Button","color","variant","ButtonGroup","aria-label","firstName","onClick","Home","FormSignin","email","password","handleChange","event","key","target","name","type","files","checked","handleSubmit","preventDefault","history","push","onChange","onSubmit","TextField","style","width","label","contextType","withRouter","Signin","FormSignup","lastName","birthDate","Signup","component","rest","render","userProfile","profilePicture","theme","createMuiTheme","palette","primary","main","light","dark","secondary","dateBegin","dateEnd","destination","tripLength","e","numberOfDays","Math","round","Date","parse","newUser","trips","_id","err","defaultValue","required","FormControl","InputLabel","Select","labelId","placeholder","MenuItem","DraggableTour","useDrag","item","image","object","collect","monitor","isDragging","drag","ref","substr","newTrip","details","objectToFind","tour","find","elem","indexToFind","indexOf","splice","window","location","reload","handleDelete","DropTarget","markAsDone","useContext","CardContext","useDrop","accept","drop","obj","index","isOver","dropResult","getItem","heigth","margin","padding","background","backgroundColor","onDrop","DragAndDrop","useState","tourList","setTourList","handleDrop","organisation","tourId","day","i","copy","map","display","flexWrap","justifyContent","DndProvider","backend","HTML5Backend","link","bookingLink","pictures","flexDirection","overflowY","height","pointsOfInterest","properties","repeat","rate","numberOfDay","indexOfDays","iOrg","filter","task","trip","capitalize","s","charAt","toUpperCase","slice","match","params","days","Array","keys","apiErr","backgroundImage","backgroundRepeat","pathname","Dashboard","componentDidMount","idToDelete","loaded","href","FooterMain","Map","ReactMapboxGl","accessToken","pointsOfInterestImg","Image","crossOrigin","AppMap","lng","lat","zoom","handleClick","selectedItem","handleSelectItem","containerStyle","top","left","bottom","right","position","center","images","layout","coordinates","geometry","PureComponent","eachTour","tours","kinds","replaceAll","addToTrip","a","dbRes","handleNewSearch","search","copyData","includes","filteredData","features","sort","b","onSelectItem","shortDescription","price","amount","ComponentToPassStyleTo","useStyles","makeStyles","root","child","SearchBar","handleSearch","classes","Grid","container","spacing","alignItems","highOrderComponent","App","ThemeProvider","CssBaseline","path","Profile","CreateTrip","OneTrip","SearchPageActivities","UpdateProfile","SearchPagePOI","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.97bb62f0.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst service = axios.create({\r\n  baseURL: process.env.REACT_APP_BACKEND_URL,\r\n  withCredentials: true, // Cookie is sent to client when using this service. (used for session)\r\n});\r\n\r\nfunction errorHandler(error) {\r\n  if (error.response.data) {\r\n    console.log(error.response && error.response.data);\r\n    throw error;\r\n  }\r\n  throw error;\r\n}\r\n\r\nexport default {\r\n  service,\r\n\r\n  signup(userInfo) {\r\n    return service\r\n      .post(\"/api/auth/signup\", userInfo)\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n  signin(userInfo) {\r\n    return service\r\n      .post(\"/api/auth/signin\", userInfo)\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n  isLoggedIn() {\r\n    return service\r\n      .get(\"/api/auth/isLoggedIn\")\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n  logout() {\r\n    return service\r\n      .get(\"/api/auth/logout\")\r\n      .then((res) => res.data)\r\n      .catch(errorHandler);\r\n  },\r\n\r\n// Profile \r\n  getProfile() {\r\n    return service\r\n    .get(\"/api/profile/me\")\r\n    .then((apiRes) => apiRes)\r\n    .catch(errorHandler)\r\n  },\r\n\r\n  modifyProfile(userInfo) {\r\n    return service\r\n      .patch(\"/api/profile/edit\", userInfo)\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  deleteProfile() {\r\n    return service\r\n      .delete(\"/api/profile\")\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  //Trips \r\n  getAllTrips() {\r\n    return service  \r\n      .get(\"/api/trip\")\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  getOneTrip(id) {\r\n    return service \r\n      .get(\"/api/trip/\" + id)\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n  \r\n  createTrip(data) {\r\n    return service\r\n    .post(\"/api/trip\", data)\r\n    .then((apiRes) => apiRes.data)\r\n    .catch(errorHandler)\r\n  },\r\n\r\n  modifyTrip(id, data) {\r\n    return service  \r\n      .patch(\"/api/trip/\" + id, data)\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  deleteTrip(id) {\r\n    return service\r\n      .delete(\"/api/trip/\" + id)\r\n      .then((apiRes) => apiRes.data)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  // new Tour DB\r\n  getActivities(desti) {\r\n    return service\r\n      .get(\"/api/activity/destination/\" + desti)\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n\r\n  getOneActivity(id) {\r\n    return service  \r\n      .get(\"/api/activity/\" + id)\r\n      .then((apiRes) => apiRes)\r\n  },\r\n\r\n// OPENTRIPMAP API\r\n  getPointsOfInterest(desti) {\r\n    return service\r\n      .get(\"api/openTripMap/\" + desti)\r\n      .then((apiRes) => apiRes)\r\n      .catch(errorHandler)\r\n  },\r\n};\r\n","import React from \"react\";\r\n\r\nexport const UserContext = React.createContext();\r\n","import React, { Component } from \"react\";\r\nimport apiHandler from \"../../api/apiHandler\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nclass UserProvider extends Component {\r\n  state = {\r\n    user: null,\r\n    isLoggedIn: false,\r\n    isLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    apiHandler\r\n      .isLoggedIn()\r\n      .then((data) => {\r\n        this.setState({ user: data, isLoggedIn: true, isLoading: false });\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ user: null, isLoggedIn: false, isLoading: false });\r\n      });\r\n  }\r\n\r\n  setUser = (user) => {\r\n    this.setState({ user, isLoggedIn: true });\r\n  };\r\n\r\n  removeUser = () => {\r\n    this.setState({ user: null, isLoggedIn: false });\r\n  };\r\n\r\n  render() {\r\n    //  Setup all the values/functions you want to expose to anybody reading\r\n    // from the AuthContext.\r\n    const authValues = {\r\n      user: this.state.user,\r\n      setUser: this.setUser,\r\n      removeUser: this.removeUser,\r\n      isLoggedIn: this.state.isLoggedIn,\r\n      isLoading: this.state.isLoading,\r\n    };\r\n\r\n    return (\r\n      <UserContext.Provider value={authValues}>\r\n        {this.props.children}\r\n      </UserContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserProvider;\r\n","import React from \"react\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\n// This is what we call a HOC (Higher Order Component).\r\n// It takes a component as a parameter and it returns a component.\r\n// This technique can be used to abstract some logic in order to pass\r\n// some data down as props to the component sent as parameter.\r\n\r\n// The use case of this one is to make it easy to access the user context to\r\n// any component in our app.\r\n\r\n/* ******************************************************** */\r\n\r\n//  How to use:  =>\r\n// YourComponent.jsx\r\n// import React from \"react\"\r\n// function or class YourComponent()\r\n//\r\n// ... your implementation.\r\n//\r\n// export default withUser(YourComponent)\r\n// ----------------^ your component now has access to the user context defined in UserProvider.jsx.\r\n\r\nexport const withUser = (ComponentToPassUserContextTo) => {\r\n  return function (props) {\r\n    return (\r\n      <UserContext.Consumer>\r\n        {(context) => (\r\n          <ComponentToPassUserContextTo {...props} context={context} />\r\n        )}\r\n      </UserContext.Consumer>\r\n    );\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { withUser } from \"../components/Auth/withUser\";\r\nimport apiHandler from \"../api/apiHandler\";\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport \"../styles/NavMain.css\";\r\n\r\n\r\n\r\n class NavMain extends React.Component {\r\n\r\n\r\n  handleLogout = () => {\r\n    apiHandler\r\n      .logout()\r\n      .then(() => {\r\n        this.props.context.removeUser();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  render () {\r\n    // console.log(this.props.context)\r\n    return (\r\n      <nav className=\"NavMain\">\r\n      <NavLink exact to=\"/\">\r\n        <img src=\"/images/logo.png\" alt=\"Logo\" />\r\n      </NavLink>\r\n          \r\n        {this.props.context.isLoggedIn && (\r\n          <React.Fragment>\r\n          <ul className=\"nav-trip\">\r\n            <Button color=\"secondary\" variant=\"contained\">\r\n              <NavLink to=\"/create-trip\">\r\n                + Create a New Trip\r\n              </NavLink>\r\n            </Button> &nbsp;\r\n            <Button color=\"secondary\" variant=\"contained\">\r\n              <NavLink to=\"/dashboard\">\r\n                My Dashboard\r\n              </NavLink>\r\n            </Button> \r\n          </ul>\r\n          <ul className=\"nav-log\">\r\n          <ButtonGroup variant=\"contained\" color=\"secondary\" aria-label=\"contained primary button group\">\r\n            \r\n              <Button><NavLink to=\"/profile\">\r\n                {this.props.context.user && this.props.context.user.firstName}\r\n              </NavLink></Button>\r\n            \r\n            <Button>\r\n              <p onClick={this.handleLogout}>Logout</p>\r\n            </Button>\r\n          </ButtonGroup>\r\n          </ul>\r\n          </React.Fragment>\r\n        )}\r\n        {!this.props.context.isLoggedIn && (\r\n          <React.Fragment>\r\n          \r\n          <ul className=\"nav-log\">\r\n          <ButtonGroup variant=\"contained\" color=\"secondary\" aria-label=\"contained primary button group\">\r\n            \r\n              <Button>\r\n              <NavLink to=\"/signin\">Log in</NavLink>\r\n              </Button>\r\n            \r\n              <Button>\r\n              <NavLink to=\"/signup\">Create account</NavLink>\r\n              </Button>\r\n            </ButtonGroup>\r\n          </ul>\r\n\r\n          </React.Fragment>\r\n        )}\r\n    </nav>\r\n  );\r\n}\r\n};\r\n\r\nexport default withUser(NavMain);\r\n","import React from \"react\";\r\nimport '../styles/home.css'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\nclass Home extends React.Component {\r\n  render() {\r\n    return (\r\n      <>\r\n      <div className=\"home\">\r\n        <h1>Welcome To Trip & Karmeliet</h1>\r\n        <p>With T&K planning your holiday has never been so easy !</p>\r\n        <p> Pick a destination, choose your activities, and hop-on the next plane to live an unforgettable adventure</p><br />\r\n      <Button variant=\"contained\" color=\"primary\">Create my first Trip !</Button>\r\n      </div>\r\n      <div className=\"image-line\">\r\n      <div>BARCELONA - BERLIN - PARIS - LONDON</div>\r\n      </div>\r\n      </>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from \"react\";\r\nimport Button from '@material-ui/core/Button'\r\nimport { UserContext } from \"../Auth/UserContext\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport apiHandler from \"../../api/apiHandler\";\r\nimport TextField from '@material-ui/core/TextField'\r\nimport '../../styles/form.css'\r\n\r\nclass FormSignin extends Component {\r\n  static contextType = UserContext;\r\n\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    const key = event.target.name;\r\n\r\n    // You can test more if you have to handle different sorts of inputs.\r\n    const value =\r\n      event.target.type === \"file\"\r\n        ? event.target.files[0]\r\n        : event.target.type === \"checkbox\"\r\n        ? event.target.checked\r\n        : event.target.value;\r\n\r\n        \r\n        this.setState({ [key]: value });\r\n      };\r\n      \r\n      handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        \r\n        apiHandler\r\n        .signin(this.state)\r\n        .then((data) => {\r\n          this.context.setUser(data);\r\n          this.props.history.push(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          // Display error message here, if you set the state\r\n        });\r\n        \r\n    }\r\n      render() {\r\n        console.log(this.state)\r\n    return (\r\n      <div className='backgroundFormSignIn'>\r\n      {/* // rajouter le handlesubmit onkeypress 13(Je crois) si t'as le temps */}\r\n      <form onChange={this.handleChange} onSubmit={this.handleSubmit} className=\"form\">\r\n      <img src=\"/favicon.ico\" alt=\"toto\" /><br />\r\n      <h1>Please Sign In</h1>\r\n        {/* <label htmlFor=\"email\">Email</label> */}\r\n        <TextField style={{width: '40%'}} type=\"email\" id=\"email\" name=\"email\" label=\"E-mail\" variant=\"outlined\" className=\"input\"/><br />\r\n        \r\n        {/* <label htmlFor=\"password\">Password</label> */}\r\n        <TextField style={{width: '40%'}} type=\"password\" id=\"password\" variant=\"outlined\" label=\"Password\" name=\"password\" className=\"input\"/>\r\n        <br />\r\n        <Button color=\"primary\" variant=\"contained\" type=\"button\" onClick={this.handleSubmit}>Submit</Button>\r\n      </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(FormSignin);\r\n","import React from \"react\";\r\nimport FormSignin from \"../components/Forms/FormSignin\";\r\n\r\nconst Signin = (props) => {\r\n  return <FormSignin />;\r\n};\r\n\r\nexport default Signin;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { UserContext } from \"../Auth/UserContext\";\r\nimport apiHandler from \"../../api/apiHandler\";\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nclass FormSignup extends Component {\r\n  static contextType = UserContext;\r\n\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    lastName:\"\",\r\n    firstName:\"\",\r\n    birthDate:\"\",\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    const value =\r\n      event.target.type === \"file\"\r\n        ? event.target.files[0]\r\n        : event.target.type === \"checkbox\"\r\n        ? event.target.checked\r\n        : event.target.value;\r\n\r\n    const key = event.target.name;\r\n    \r\n    this.setState({ [key]: value, });\r\n    console.log(this.state)\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    apiHandler\r\n      .signup(this.state)\r\n      .then((data) => {\r\n        this.context.setUser(data);\r\n        this.props.history.push(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='backgroundFormSignUp'>\r\n\r\n      <form onChange={this.handleChange} onSubmit={this.handleSubmit} className=\"form\">\r\n      <img src=\"/favicon.ico\" alt=\"toto\" /><br />\r\n      <h1>Please Sign Up</h1><br />\r\n       \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"text\" id=\"firstName\" label='First Name' name=\"firstName\" /><br />\r\n\r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"text\" id=\"lastName\" label='Last Name' name=\"lastName\" /><br />\r\n        \r\n        {/* <TextField style={{width: '40%'}} variant=\"outlined\" type=\"date\" id=\"birthDate\" name=\"birthDate\"/><br /> */}\r\n        \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"email\" id=\"email\" label='E-mail' name=\"email\" /><br />\r\n        \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" type=\"password\" id=\"password\" label='Password' name=\"password\" /><br />\r\n\r\n\r\n        <Button color=\"primary\" variant=\"contained\" onClick={this.handleSubmit}>Submit</Button>\r\n      </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(FormSignup);\r\n","import React from \"react\";\r\nimport FormSignup from \"../components/Forms/FormSignup\";\r\n\r\nconst Signup = (props) => {\r\n  return <FormSignup />;\r\n};\r\n\r\nexport default Signup;\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { withUser } from \"../components/Auth/withUser\";\r\n\r\nconst ProtectedRoute = ({ component: Component, context, ...rest }) => {\r\n  if (context.isLoading) {\r\n    return null;\r\n  } else if (context.isLoggedIn) {\r\n    return <Route {...rest} render={(props) => <Component {...props} />} />;\r\n  } else {\r\n    return <Redirect to=\"/signin\" />;\r\n  }\r\n};\r\n\r\nexport default withUser(ProtectedRoute);\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport {withUser} from '../components/Auth/withUser'\r\n\r\nconst Profile = (props) => {\r\n  const userProfile = props.context.user\r\n  \r\n  console.log(userProfile)\r\n  return (\r\n    <div>\r\n      <h1> Welcome on your Profile Page Dear {userProfile.firstName}</h1>\r\n      <img src={userProfile.profilePicture} alt={userProfile.firstName}/>\r\n      <h3>Please find your information below : </h3>\r\n      <ul>\r\n        <li>First Name : {userProfile.firstName}</li>\r\n        <li>Last Name : {userProfile.lastName}</li>\r\n        <li>E-mail : {userProfile.email}</li>\r\n\r\n      </ul>\r\n\r\n      I you wish to modify your information, please click <NavLink to=\"/profile/edit\">here</NavLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withUser(Profile);\r\n","import { createMuiTheme }  from '@material-ui/core/styles'\r\n\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n        main: '#0800a3',\r\n        light: '#554dff',\r\n        dark: '#737373'\r\n    },\r\n    secondary: {\r\n        main: '#f1c232ff',\r\n        light: '#f0cc00'\r\n    },\r\n    error: {\r\n      main: '#ff0505',\r\n    },\r\n  },\r\n})\r\n\r\n\r\nexport default theme","import React, { Component } from 'react'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport {withUser} from '../../components/Auth/withUser'\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { MenuItem } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button'\r\nimport apiHandler from '../../api/apiHandler';\r\n\r\nclass CreateTrip extends Component {\r\n    state = {\r\n        dateBegin: \"\",\r\n        dateEnd: \"\",\r\n        destination:\"\",\r\n        tripLength: 0,\r\n        error: false\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        e.preventDefault();\r\n\r\n        const name = e.target.name\r\n        const value = e.target.value\r\n        this.setState({\r\n            [name]: value,\r\n        })\r\n        \r\n        // console.log(e.target.value)\r\n        // console.log(e.target.name)\r\n\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        const oneDay = 24 * 60 * 60 * 1000\r\n        const numberOfDays = Math.round(((Date.parse(this.state.dateEnd) - Date.parse(this.state.dateBegin)) / oneDay) +1 )\r\n        if (numberOfDays <= 0 || !this.state.destination) {\r\n            this.setState({\r\n                error: !this.state.error\r\n            })\r\n        }\r\n        const newUser = {...this.props.context.user}\r\n\r\n        this.setState({\r\n            tripLength: numberOfDays,\r\n        })\r\n        console.log(numberOfDays)\r\n        if (numberOfDays <= 0) {\r\n        } else{\r\n            // console.log(\"ce qu'on va crÃ©er\",this.state)\r\n            apiHandler\r\n                .createTrip(this.state)\r\n                .then((data) => {\r\n                    newUser.trips.push(data._id)\r\n                    // console.log(newUser)\r\n                    apiHandler\r\n                        .modifyProfile(newUser)\r\n                        .then((res) => {\r\n                            console.log(res)\r\n                        })\r\n                    // this.props.context.setUser(newUser)\r\n                    this.props.history.push(`/trip/${data._id}`)\r\n\r\n                })\r\n                .catch((err) => {\r\n                    // console.log(err)\r\n                });\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    render() {\r\n        // console.log('dans render', this.props.context.user.trips)\r\n        return (\r\n            <div>\r\n                <form className=\"form\" onChange={this.handleChange} onSubmit={this.handleSubmit}>\r\n            <h1>Create Your Trip !</h1>\r\n            &nbsp;\r\n            <p>Start by picking your trip dates and the destination you are going to ! <br /><br /> You will then arrive on your Trip page from which you can have a look at what you planned. <br/><br /> You will also be able to search for interesting activities and points of interest in that destination, pick them up and let us create the perfect schedule ! </p><br /> <br />\r\n                    <div>\r\n                    <TextField style={{width: '45%'}} type=\"date\" variant=\"outlined\" defaultValue=\"2020-07-14\" label=\"Start Date\" name=\"dateBegin\" required/> &nbsp; \r\n                    <TextField style={{width: '45%'}} type=\"date\" variant=\"outlined\" defaultValue=\"2020-07-21\" label=\"End Date\" name=\"dateEnd\" required/>\r\n                    </div><br />\r\n\r\n                    <FormControl variant=\"outlined\" style={{width: '70%'}}>\r\n                        <InputLabel id=\"destination\">Destination</InputLabel>\r\n                        <Select labelId=\"destination\" name=\"destination\" placeholder=\"Destination\" onChange={this.handleChange}>\r\n                            <MenuItem value=\"\">None</MenuItem>\r\n                            <MenuItem value={\"paris\"}>Paris</MenuItem>\r\n                            <MenuItem value={\"london\"}>London</MenuItem>\r\n                            <MenuItem value={\"berlin\"}>Berlin</MenuItem>\r\n                            <MenuItem value={\"barcelona\"}>Barcelona</MenuItem>\r\n                        </Select><br />\r\n                    <div> {this.state.error ? <p> Invalid date or destination</p> : ''}</div>\r\n                    <Button color=\"primary\" variant=\"contained\" type=\"button\" onClick={this.handleSubmit}>Create Trip</Button>\r\n                    </FormControl>\r\n\r\n\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withUser(CreateTrip)\r\n","import React from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport {NavLink} from 'react-router-dom' \r\nimport apiHandler from '../api/apiHandler';\r\n\r\nexport default function DraggableTour(props) {\r\n    // console.log(props)\r\n\r\n    const handleDelete = (id) => {\r\n        // console.log(props.id)\r\n        const newTrip = {...props.object.details}\r\n        const objectToFind = newTrip.tour.find(elem => elem._id === props.id)\r\n        const indexToFind = newTrip.tour.indexOf(objectToFind)\r\n        // console.log(indexToFind)\r\n        newTrip.tour.splice(indexToFind, 1)\r\n        apiHandler\r\n            .modifyTrip(props.object.details._id, newTrip)\r\n            .then((apiRes) => {\r\n                window.location.reload(false)\r\n                console.log(apiRes)\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const [{isDragging}, drag] = useDrag({\r\n        item: {type: 'function', name: props.name, image: props.image, id: props.id, object:props},\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n      })\r\n    return (\r\n        <div className=\"activities-card\" ref={drag}>\r\n            {/* <NavLink exact to={props.link}> */}\r\n            <img style={{width: '100%'}} src={props.image} alt={props.name}/>\r\n            <p>{props.name.substr(0, 18)}...</p>\r\n            <DeleteForeverIcon onClick={() => handleDelete(props.id)}/>\r\n            {/* </NavLink> */}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","import React, {\r\n     useContext} from 'react'\r\nimport { useDrop } from 'react-dnd'\r\nimport { CardContext } from './DragAndDrop';\r\n\r\n\r\nexport default function DropTarget(props) {\r\n\r\n    const handleDrop = ( e , index) => {\r\n        // console.log(e, 'titi', index)\r\n\r\n    }\r\n\r\n    const {markAsDone} = useContext(CardContext)\r\n    const [{dropResult, isOver}, drop] = useDrop({\r\n        accept: 'function', \r\n        drop: (obj, monitor) => { markAsDone(obj.id, props.index)},\r\n        collect: (monitor) => ({\r\n            isOver: !!monitor.isOver(),\r\n            dropResult: monitor.getItem(),\r\n        }) \r\n    });\r\n    // console.log(props.index) // ApiHandler -> set Tour day X == props.index\r\n\r\n  return (<td ref={drop} style={{heigth: '50px', width: '50px', margin: '10px', padding:'10px', background:'#fff', backgroundColor: isOver ? 'cornflowerblue' : \"white\"}} onDrop={handleDrop} value={props.key}> Drop the Activity here ! {props.children}</td>)\r\n}","import React from 'react'\r\nimport { useState, createContext } from 'react';\r\nimport DraggableTour from './DraggableTour';\r\nimport { DndProvider } from 'react-dnd'\r\nimport { HTML5Backend } from 'react-dnd-html5-backend'\r\nimport DropTarget from './DropTarget';\r\nimport apiHandler from '../api/apiHandler';\r\n\r\nexport const CardContext = createContext({\r\n\tmarkAsDone: null,\r\n});\r\n\r\n\r\nexport default function DragAndDrop(props) {\r\n    // console.log(props.details._id)\r\n\r\n    const [tourList, setTourList] = useState(\r\n\t\tprops.details.tour\r\n    );\r\n\r\n    // // const [uniqueDrop, setUniqueDrop] = useState({accepts: 'function'})\r\n    \r\n    const handleDrop = (e, item) => {\r\n        // console.log(e, 'toto', item)\r\n       \r\n        // const {name} = item;\r\n        // setUniqueDrop()\r\n    }\r\n\r\n    const markAsDone = (_id, index) => {\r\n        const newTrip = {...props.details}\r\n        // console.log(newTrip) // index + 1 c'est le numero de jour, _id c'est l'id \r\n        newTrip.organisation.push({tourId: _id, day: index })\r\n\r\n        // console.log(\"newTrip : \", newTrip)\r\n        apiHandler\r\n            .modifyTrip(props.details._id, newTrip)\r\n            .then((apiRes) => {\r\n                // console.log(apiRes)\r\n            })\r\n            .catch((err) => {\r\n                // console.log(err)\r\n            })\r\n        // console.log(_id, tourList)\r\n        const tour = tourList.find((tour, i) => {\r\n \r\n        return tour._id === _id})\r\n        // console.log(tours)\r\n      \r\n        const copy = {...tour}\r\n        copy.day = `day${index}`\r\n\r\n\r\n        \r\n\t\tsetTourList(tourList.map(tour => tour._id === _id ? copy : tour ));\r\n    };\r\n    \r\n\r\n    // console.log(props.details)\r\n    return (\r\n    <CardContext.Provider value={{markAsDone}}>\r\n        <div>\r\n            <div className=\"activities-and-points\">\r\n                <div className='all-activities'>\r\n                    <h1>Your Activities: </h1>\r\n                    <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent:\"center\", }}>\r\n                        {props.details ? props.details.tour.map((obj, i) => {\r\n                            return ( <React.Fragment key={i}>\r\n                                <DndProvider backend={HTML5Backend}>\r\n                                    <DraggableTour link={obj.bookingLink} image={obj.pictures[0]} name={obj.name} id={obj._id} object={props} onDrop={handleDrop}/>\r\n                                </DndProvider>\r\n                            </React.Fragment>)\r\n                    }) : (<div> Content is loading</div>)}\r\n                </div>\r\n            </div>\r\n                <h1>Your Points of Interest: </h1>\r\n                    <div style={{display: \"flex\", justifyContent:\"center\", flexDirection:\"column\", overflowY: \"scroll\", height: \"100px\", background: \"white\"}}>\r\n                        {props.details ? props.details.pointsOfInterest.map((obj, i) => {\r\n                            return (<div key={i} style={{display: \"flex\", flexDirection: \"column\", margin: \"5px\"}}>\r\n                                <h1>{obj.properties.name}</h1>\r\n                                <p>{'â'.repeat(Math.round(obj.properties.rate))}\r\n                                {'â'.repeat(3 - Math.round(obj.properties.rate))}</p>\r\n                            </div>)\r\n                    }\r\n                    ) : (<div>content is loading</div>)}\r\n            </div>\r\n        </div>\r\n                <table>\r\n                    <thead>\r\n                    <tr>\r\n                        {props.details && props.numberOfDay.map((elem, i) => {\r\n                            return (<td key={i}>Day {elem}</td>   )\r\n                        })}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                        {props.details && props.numberOfDay.map((elem, indexOfDays) => {\r\n                            return (<React.Fragment key={indexOfDays}>\r\n                                <DndProvider backend={HTML5Backend}>\r\n                                {props.details.organisation[0] ? ( \r\n                                    props.details.organisation.map((obj, iOrg) =>  //console.log(obj)\r\n                                     (<DropTarget key={iOrg} index={obj.day}>\r\n                                        <DraggableTour image={obj.tourId.pictures[0]} name={obj.tourId.name} />\r\n                                     </DropTarget>)) \r\n                                ) : (\r\n                                    <DropTarget index={indexOfDays} onDrop={handleDrop} >{\r\n                                        tourList\r\n\t\t\t\t\t\t\t            .filter((task, i) => task.day === `day${indexOfDays}`)\r\n\t\t\t\t\t\t\t            .map((obj, i) => (\r\n\t\t\t\t\t\t\t\t        <DraggableTour link={obj.bookingLink} image={obj.pictures[0]} name={obj.name} onDrop={handleDrop} />\r\n\t\t\t\t\t\t\t            ))}\r\n                                    </DropTarget>\r\n                                )\r\n                            }\r\n                                </DndProvider>    \r\n                            </React.Fragment>)\r\n                        })}\r\n                            \r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n\t\t\t\t\t\t\t\t{/* <DraggableTour object={props.object} link={props.details.tour[2].bookingLink} image={props.details.tour[2].pictures[0]} name={props.details.tour[2].name} /> */}\r\n        </div>\r\n    </CardContext.Provider>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport apiHandler from '../../api/apiHandler'\r\nimport { Link } from \"react-router-dom\";\r\nimport Button from '@material-ui/core/Button'\r\nimport { withUser } from '../../components/Auth/withUser'\r\nimport '../../styles/oneTrip.css'\r\nimport DragAndDrop from '../../components/DragAndDrop';\r\n\r\nclass OneTrip extends Component {\r\n\r\n    state = {\r\n        trip: {},\r\n        numberOfDay: null,\r\n    }\r\n\r\n    capitalize = (s) => {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n      }\r\n\r\n    componentDidMount() {  \r\n        apiHandler\r\n            .getOneTrip(this.props.match.params.id)\r\n            .then((apiRes) => {\r\n                // console.log(apiRes);\r\n                const oneDay = 24 * 60 * 60 * 1000\r\n                const numberOfDays = Math.round((Date.parse(apiRes.dateEnd) - Date.parse(apiRes.dateBegin)) / oneDay) +1;\r\n                const days =  [...Array(numberOfDays).keys()].map((elem) => elem+1)\r\n                this.setState({\r\n                    trip: apiRes,\r\n                    numberOfDay: days\r\n                });\r\n                // console.log(days)\r\n            })\r\n            .catch((apiErr) => {\r\n                console.log(apiErr)\r\n            }); \r\n        }\r\n\r\n    \r\n    \r\n    render() {\r\n        // this.state.numberOfDay && this.state.trip.tour.map((obj) => console.log(obj))\r\n        // console.log(typeof(DraggableTour))\r\n        return (\r\n            <section className='one-trip'>\r\n            <div className=\"destination\" style={{backgroundImage: `url('/images/${this.state.trip.destination}.jpg')`, backgroundRepeat: \"no-repeat\"}}>\r\n                <h1>Your trip to {this.capitalize(this.state.trip.destination)} will be unforgettable!</h1>\r\n                <p>{this.capitalize(this.state.trip.destination)} is a really nice destination, it's sure that you will enjoy your trip ! But why not adding some spices to this adventure ? </p>\r\n                <Button color=\"primary\" variant=\"contained\">\r\n                    <Link to={{pathname: \"/search/activities\", state:{trip: this.state.trip} }}>\r\n                        Search activities\r\n                    </Link> \r\n                </Button>&nbsp;\r\n                <Button color=\"primary\" variant=\"contained\">\r\n                    <Link to={{pathname: \"/search/points-of-interest\", state:{trip: this.state.trip} }}>\r\n                        Search Points of Interest\r\n                    </Link> \r\n                </Button>&nbsp;\r\n            </div>\r\n            {this.state.numberOfDay ? <DragAndDrop details={this.state.trip} numberOfDay={this.state.numberOfDay}/> : <div>Content is loading ...</div>}\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withUser(OneTrip)","import React, { Component } from 'react'\r\nimport apiHandler from \"../api/apiHandler\";\r\nimport {withUser} from '../components/Auth/withUser'\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nclass UpdateProfile extends Component {\r\n\r\n    state = {\r\n\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const value =\r\n          event.target.type === \"file\"\r\n            ? event.target.files[0]\r\n            : event.target.type === \"checkbox\"\r\n            ? event.target.checked\r\n            : event.target.value;\r\n    \r\n        const key = event.target.name;\r\n        \r\n        this.setState({ [key]: value, });\r\n        console.log(this.state)\r\n      };\r\n\r\n      handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        console.log(this.state)\r\n   \r\n        apiHandler\r\n        .modifyProfile(this.state)\r\n      \r\n        .then((res) => {\r\n          console.log(res)\r\n          this.props.context.setUser(res.data);\r\n          console.log(res)\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      };\r\n\r\n    render() {\r\n        const userProfile = this.props.context.user\r\n        // console.log(this.state)\r\n        return (\r\n            <div className='backgroundFormSignUp'>\r\n\r\n      <form onSubmit={this.handleSubmit} className=\"form\">\r\n      <img src=\"/favicon.ico\" alt=\"toto\" /><br />\r\n      <h1>Update your Infos</h1><br />\r\n       \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" defaultValue={userProfile.firstName} type=\"text\" id=\"firstName\" label='First Name'  name=\"firstName\" onChange={this.handleChange}/><br />\r\n\r\n        <TextField style={{width: '40%'}} variant=\"outlined\" defaultValue={userProfile.lastName} type=\"text\" id=\"lastName\" label='Last Name' name=\"lastName\" onChange={this.handleChange} /><br />\r\n        \r\n        {/* <TextField style={{width: '40%'}} variant=\"outlined\" type=\"date\" id=\"birthDate\" name=\"birthDate\"/><br /> */}\r\n        \r\n        <TextField style={{width: '40%'}} variant=\"outlined\" defaultValue={userProfile.email} type=\"email\" id=\"email\" label='E-mail' name=\"email\" onChange={this.handleChange} /><br />\r\n        \r\n        {/* <TextField style={{width: '40%'}} variant=\"outlined\" value={userProfile.password} type=\"password\" id=\"password\" label='Password' name=\"password\" onChange={this.handleChange} /><br /> */}\r\n\r\n\r\n        <Button color=\"primary\" variant=\"contained\" onClick={this.handleSubmit}>Submit</Button>\r\n      </form>\r\n      </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withUser(UpdateProfile)\r\n","import React, { Component } from 'react'\r\nimport apiHandler from '../api/apiHandler'\r\nimport '../styles/dashboard.css'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\n\r\nclass Dashboard extends Component {\r\n\r\n    state = {\r\n        user: null\r\n    }\r\n\r\n    capitalize = (s) => {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n      }\r\n\r\n    componentDidMount = () => {\r\n        apiHandler\r\n            .getProfile()\r\n            .then((res) => {\r\n                this.setState({\r\n                    user: res.data\r\n                })\r\n            })\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n    handleDelete = (id) => {\r\n        console.log(id)\r\n        apiHandler\r\n            .deleteTrip(id)\r\n            .then((apiRes) => {\r\n                console.log('toto')\r\n                const newUser = {...this.state.user}\r\n                const idToDelete = newUser.trips.indexOf(id)\r\n                newUser.trips.splice(idToDelete, 1)\r\n                apiHandler\r\n                    .modifyProfile(newUser)\r\n                    .then((apiRes) => {\r\n                        console.log(apiRes)\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(err)\r\n                    })\r\n                \r\n                window.location.reload(false)\r\n            })\r\n            .catch((apiErr) => {\r\n                console.log(apiErr)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        // console.log(this.state.user && this.state.user.trips[0].destination)\r\n        const loaded = this.state.user && this.state.user.trips\r\n        console.log(this.props)\r\n\r\n        return (<>\r\n            <div className=\"dashboard-head\">\r\n                <h1> Welcome To Your Dashboard</h1>&nbsp;\r\n                <h3> This is the place to manage your trips ! </h3>&nbsp;\r\n                <p> In the dashboard you can edit your trips, take a look at your past trips if you want to share what you did to friends, and even delete them if you're sure to never forget ! </p>&nbsp;\r\n                <p>Nota bene: You shouldn't book more than 2 activities per day, otherwise the schedule will be tight</p>\r\n            </div>\r\n                <table className=\"dashboard-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <td>Destination</td>\r\n                            <td>Start Date</td>\r\n                            <td>End Date</td>\r\n                            <td>View/Edit Trip</td>\r\n                            <td>Delete Trip</td>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {loaded ? this.state.user.trips.map((obj, i) => (<tr>\r\n                            <td key={i}>{this.capitalize(obj.destination)}</td>\r\n                            <td>{obj.dateBegin.substr(0,10)}</td>\r\n                            <td>{obj.dateEnd.substr(0,10)}</td>\r\n                            <td><a href={`/trip/${obj._id}`}><Button variant=\"contained\" color=\"primary\">View Details</Button></a></td>\r\n                            <td><Button variant=\"contained\" onClick={() => this.handleDelete(obj._id)}>Delete</Button></td>\r\n                            \r\n                        </tr>))\r\n                         : <td>is Loading</td>}\r\n                    </tbody>\r\n                </table>\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Dashboard","import React, { Component } from 'react'\r\n\r\nclass FooterMain extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default FooterMain","import React from \"react\";\r\nimport ReactMapboxGl, { Layer, Feature } from \"react-mapbox-gl\";\r\nimport Button from '@material-ui/core/Button'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\n\r\nconst Map = ReactMapboxGl({\r\n  accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\r\n});\r\n\r\nconst pointsOfInterestImg = new Image(35, 35);\r\npointsOfInterestImg.src = \"https://img.icons8.com/ios/452/point-of-interest.png\";\r\npointsOfInterestImg.crossOrigin = \"Anonymous\";\r\n\r\nclass AppMap extends React.PureComponent {\r\n  \r\n    state = {\r\n    lng: null,\r\n    lat: null,\r\n    zoom: 1 // used for map zoom level\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(this.props.destination)\r\n      if (this.props.destination === \"paris\"){\r\n          console.log('paris')\r\n          this.setState({\r\n            lng: 2.34,\r\n            lat: 48.86,\r\n            zoom: 12\r\n        })\r\n    } else if (this.props.destination === \"london\") {\r\n        console.log('london')\r\n        this.setState({\r\n            lng: -0.12,\r\n            lat: 51.51,\r\n            zoom: 13,\r\n        })\r\n    } else if (this.props.destination === \"barcelona\") {\r\n        console.log('barcelona')\r\n        this.setState({\r\n            lat: 41.39,\r\n            lng: 2.155,\r\n            zoom: 13,\r\n        })\r\n    } else if (this.props.destination === \"berlin\") {\r\n        console.log(\"berlin\")\r\n        this.setState({\r\n            lat: 52.52,\r\n            lng: 13.4,\r\n            zoom: 13,\r\n        })\r\n    };\r\n\r\n  }\r\n\r\n  handleClick = (selectedItem) => {\r\n    // Pass the selectedItem back to the parent.\r\n    this.props.handleSelectItem(selectedItem);\r\n  };\r\n\r\n  render() {\r\n    // console.log(this.props.id)\r\n\r\n    return (\r\n        <>\r\n        <div className='back-button'>\r\n            <NavLink exact to={`/trip/${this.props.id}`}><Button color=\"primary\" variant=\"contained\" className='back-button'>Back to the Trip Page</Button></NavLink>\r\n        </div>\r\n     {this.state.lat ? <Map\r\n        style={\"mapbox://styles/mapbox/light-v10\"}\r\n        zoom={[this.state.zoom]}\r\n        containerStyle={{\r\n          top: 70,\r\n          left: 5,\r\n          bottom: 5,\r\n          right: 5,\r\n          position: 'fixed'}}\r\n          center={[this.state.lng, this.state.lat]} >\r\n    \r\n            (<Layer type=\"symbol\" id=\"marker\" images={[\"poi-icon\", pointsOfInterestImg]} layout={{ \"icon-image\": \"poi-icon\" }}>\r\n            {this.props.pointsOfInterest && this.props.pointsOfInterest.map((obj, i) => \r\n                <Feature onClick={(e) => this.handleClick(obj)}  key={i} coordinates={[obj.geometry.coordinates[0], obj.geometry.coordinates[1]]} />\r\n             )} \r\n            </Layer>)  \r\n      \r\n    \r\n      </Map> : <div>Content is loading</div>\r\n      }\r\n\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppMap;\r\n","import React from 'react'\r\nimport '../styles/eachTour.css'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nexport default function eachTour(props) {\r\n    let tours = props.pointsOfInterest\r\n    console.log(props.pointsOfInterest)\r\n    return (\r\n        <div>\r\n            {tours ?\r\n                 (\r\n                    <div className=\"display-item\">\r\n                    <div className=\"tourDescription\">\r\n                        <h2>{tours.properties.name}</h2>\r\n                        <p> rate: \r\n                        {'â'.repeat(Math.round(tours.properties.rate))}\r\n                        {'â'.repeat(3 - Math.round(tours.properties.rate))}</p>\r\n                        <p>Tags: {tours.properties.kinds.replaceAll(',', ', ').replaceAll('_', ' ')}</p>  \r\n                    </div>\r\n                    <div className=\"bookTour\">\r\n                        <Button onClick={() => props.addToTrip({geometry: tours.geometry, properties: tours.properties})} color=\"primary\" variant=\"contained\">\r\n                        Add to my trip\r\n                        </Button>\r\n                    </div>\r\n                    </div>\r\n            ) : console.log('Content is loading')}\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport apiHandler from '../api/apiHandler'\r\nimport AppMap from '../components/AppMap'\r\nimport { withUser } from '../components/Auth/withUser'\r\nimport EachPOI from '../components/EachPOI'\r\n\r\n\r\nclass SearchPagePOI extends Component {\r\n    \r\n    state = {\r\n        data: \"\",\r\n        destination: this.props.location.state.trip.destination,\r\n        id: this.props.location.state.trip._id\r\n    }\r\n\r\n    \r\n    addToTrip = async (id) => {\r\n        // console.log(id)\r\n        try {\r\n            const dbRes = await apiHandler.getOneTrip(this.props.location.state.trip._id)\r\n\r\n            const newTrip = {...dbRes}\r\n            newTrip.pointsOfInterest.push(id)\r\n            console.log(newTrip)\r\n\r\n          const apiRes = await apiHandler.modifyTrip(this.props.location.state.trip._id, newTrip)\r\n                console.log(apiRes)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }    \r\n    }\r\n        \r\n    \r\n\r\n    componentDidMount() {\r\n        // console.log(this.state)\r\n\r\n        apiHandler\r\n            .getPointsOfInterest(this.state.destination)\r\n            .then((apiRes) => {\r\n                // console.log(apiRes.data.features)\r\n                const filteredData = apiRes.data.features.filter((obj) => {\r\n                    return obj.properties.rate <= 3\r\n                })\r\n                filteredData.sort((a, b) => {\r\n                   return a.properties.rate < b.properties.rate ? 1 : a.properties.rate > b.properties.rate ? -1 : 0 \r\n                })\r\n                // console.log(filteredData)\r\n                this.setState({\r\n             data: filteredData\r\n            })})\r\n    }\r\n    \r\n    \r\n    handleNewSearch = (search) => {\r\n        if(!search){\r\n        apiHandler\r\n        .getPointsOfInterest(this.state.destination)\r\n        .then((apiRes) => {\r\n            // console.log(apiRes)\r\n            const filteredData = apiRes.data.features.filter((obj) => {\r\n                return obj.properties.rate <= 3\r\n            })\r\n            filteredData.sort((a, b) => {\r\n               return a.properties.rate < b.properties.rate ? 1 : a.properties.rate > b.properties.rate ? -1 : 0 \r\n            })\r\n            this.setState({\r\n                data: filteredData\r\n            })\r\n        })\r\n        }else{\r\n            console.log(search)\r\n            \r\n            const copyData = [...this.state.data]\r\n                    \r\n                //   console.log()\r\n            this.setState({ \r\n                data: copyData.filter((obj,i) => {\r\n                return (obj.properties.name.includes(search))}\r\n                )\r\n            })\r\n        }\r\n    }\r\n                                \r\n    onSelectItem = (selectedItem) => {\r\n        this.setState({ selectedItem: selectedItem });\r\n      };\r\n                               \r\n                                \r\n                                \r\n    render() {\r\n        return (\r\n            <div>&nbsp;\r\n                <EachPOI pointsOfInterest={this.state.selectedItem} addToTrip={this.addToTrip} />\r\n                <AppMap id={this.state.id} handleSelectItem={this.onSelectItem} destination={this.state.destination} pointsOfInterest={this.state.data}/>\r\n                   \r\n            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withUser(SearchPagePOI)\r\n","import React from 'react'\r\nimport '../styles/eachTour.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nexport default function eachTour(props) {\r\n    let tours = props.tourList\r\n    console.log(props)\r\n    return (\r\n        <div>\r\n        <div className='back-button'>\r\n            <NavLink exact to={`/trip/${props.id}`}><Button color=\"primary\" variant=\"contained\" className='back-button'>Back to the Trip Page</Button></NavLink>\r\n        </div>\r\n            {tours ? tours.map((obj, i) =>{\r\n                return (\r\n                    <div className=\"tourCards\" key={i}>\r\n                    <img src={obj.pictures[0]} alt={obj.name} />\r\n                    <div className=\"tourDescription\">\r\n                        <h2>{obj.name}</h2>\r\n                        <p>{obj.shortDescription}</p>\r\n                    </div>\r\n                    <div className=\"bookTour\">\r\n                        <h3>From â¬ {obj.price.amount} per person</h3><br />\r\n                        <Button key={i}  onClick={() => props.addToTrip(obj._id)} color=\"primary\" variant=\"contained\">\r\n                        Add to my trip\r\n                        </Button><br />\r\n                        <Button href={obj.bookingLink} color=\"secondary\" variant=\"contained\">Book Now</Button>\r\n                    </div>\r\n                    </div>\r\n            )}) : (<h1> Content is loading </h1>)}\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    color: props => props.color,\r\n    width: '80%',\r\n    display: \"flex\",\r\n    justifyContent: 'center',\r\n  },\r\n  child: {\r\n    width: '200%',\r\n  }\r\n});\r\n\r\nconst highOrderComponent = (ComponentToPassStyleTo) => {\r\n  return (props) => \r\n    { const classes = useStyles()\r\n      return <ComponentToPassStyleTo {...props} classes={classes} />}\r\n}\r\n\r\nclass SearchBar extends Component {\r\n\r\n  \r\n  state ={\r\n    search : \"\",\r\n    // filter: true\r\n  }\r\n \r\n  handleChange = (event) =>{\r\n    // console.log(event.target.value);\r\n\r\n    let value = event.target.value;\r\n    // const key = event.target.name;\r\n    \r\n    this.setState({search:value})\r\n    this.props.handleSearch(value)\r\n  }\r\n\r\n//   handleCheck = (evt) => {\r\n//     let value = evt.target.checked\r\n//     this.props.handleCheckBox(\r\n//       value\r\n//     )\r\n\r\n    // if (evt.target.checked === true) {\r\n    //   console.log(evt)\r\n    // } else {\r\n    //   console.log('toto')\r\n    // }\r\n//   }\r\n\r\n  render() {\r\n    const classes = this.props.classes\r\n    return (\r\n      <div className={`search-bar`}>\r\n        <Grid container spacing={1} alignItems=\"flex-end\" className={classes.root}>\r\n          <Grid item>\r\n            <SearchIcon />\r\n          </Grid>\r\n          <Grid item>\r\n            <TextField className={classes.child} label=\"Search\" id=\"search\" name=\"search\" onChange={this.handleChange} />\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default highOrderComponent(SearchBar)","import React, { Component } from 'react'\r\nimport apiHandler from '../api/apiHandler'\r\nimport {withUser} from '../components/Auth/withUser'\r\nimport EachTour from '../components/EachTour'\r\nimport SearchBar from '../components/SearchBar'\r\n\r\nclass SearchPage extends Component {\r\n\r\n    \r\n    \r\n    state = {\r\n        data: \"\",\r\n        destination: this.props.location.state.trip.destination,\r\n        id: this.props.location.state.trip._id\r\n    }\r\n\r\n    \r\n    addToTrip = async (id) => {\r\n        console.log(id)\r\n        try {\r\n            const dbRes = await apiHandler.getOneTrip(this.props.location.state.trip._id)\r\n\r\n            const newTrip = {...dbRes}\r\n            newTrip.tour.push(id)\r\n            console.log(newTrip)\r\n\r\n          const apiRes = await apiHandler.modifyTrip(this.props.location.state.trip._id, newTrip)\r\n                console.log(apiRes)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }    \r\n    }\r\n        \r\n    \r\n\r\n    componentDidMount() {\r\n        console.log(this.state)\r\n\r\n        apiHandler\r\n            .getActivities(this.state.destination)\r\n            .then((apiRes) => {\r\n                this.setState({\r\n             data: apiRes.data\r\n            })})\r\n    }\r\n    \r\n    \r\n    handleNewSearch=(search)=> {\r\n        if(!search){\r\n        apiHandler\r\n        .getActivities(this.state.destination)\r\n        .then((apiRes) => {\r\n            console.log(apiRes)\r\n            this.setState({\r\n                data: apiRes.data\r\n            })\r\n        })\r\n        }else{\r\n            console.log(search)\r\n            \r\n            const copyData = [...this.state.data]\r\n                    \r\n                  // console.log(copyData[0].name)\r\n            this.setState({ \r\n                data: copyData.filter((obj,i) => {\r\n                return (obj.name.includes(search))}\r\n                )\r\n            })\r\n        }\r\n    }\r\n                                \r\n                                \r\n                                \r\n                                \r\n    render() {\r\n    // console.log('toto :', this.state.data)\r\n    // let activities = this.state.data\r\n        return (\r\n            <div>\r\n                <SearchBar handleSearch={this.handleNewSearch}/>\r\n                <EachTour id={this.state.id} tourList={this.state.data} addToTrip={this.addToTrip} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withUser(SearchPage)\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport NavMain from \"./components/NavMain\";\r\nimport Home from \"./pages/Home\";\r\nimport Signin from \"./pages/Signin\";\r\nimport Signup from \"./pages/Signup\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\nimport Profile from \"./pages/Profile\";\r\nimport { ThemeProvider } from '@material-ui/core/styles'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\nimport theme from '../src/styles/theme'\r\nimport CreateTrip from \"./pages/trip/CreateTrip\"\r\nimport OneTrip from \"./pages/trip/OneTrip\";\r\nimport UpdateProfile from \"./pages/UpdateProfile\";\r\nimport Dashboard from \"./pages/Dashboard\";\r\nimport FooterMain from './components/FooterMain'\r\nimport SearchPagePOI from \"./pages/SearchPagePOI\";\r\nimport SearchPageActivities from \"./pages/SearchPageActivities\";\r\n\r\nfunction App() {  \r\n\r\n  return (\r\n    <div className=\"App\">\r\n    <ThemeProvider theme={theme} >\r\n      <CssBaseline />\r\n      <NavMain />\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Home} />\r\n        <Route exact path=\"/signin\" component={Signin} />\r\n        <Route exact path=\"/signup\" component={Signup} />\r\n        <ProtectedRoute exact path=\"/profile\" component={Profile} />\r\n        <ProtectedRoute exact path=\"/dashboard\" component={Dashboard} />\r\n        <ProtectedRoute exact path=\"/create-trip\" component={CreateTrip} />\r\n        <ProtectedRoute exact path=\"/trip/:id\" component={OneTrip} />\r\n        <ProtectedRoute exact path=\"/search/activities\" component={SearchPageActivities} />\r\n        <ProtectedRoute exact path=\"/profile/edit\" component={UpdateProfile} />\r\n        <ProtectedRoute exact path=\"/search/points-of-interest\" component={SearchPagePOI} />\r\n      </Switch>\r\n      <FooterMain />\r\n    </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport UserProvider from \"./components/Auth/UserProvider\";\r\nimport App from \"./App\";\r\n\r\nimport \"./styles/reset.css\";\r\nimport \"./styles/global.css\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <UserProvider>\r\n      <App />\r\n    </UserProvider>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}